var Fayde;!function(e){var t;!function(e){e.version="0.21.0"}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){t.Library=e.TypeManager.resolveLibrary("lib://fayde.controls")}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Fayde;!function(e){var t;!function(t){var n=function(t){function n(){t.call(this),this.DefaultStyleKey=n}return __extends(n,t),n.prototype.OnBusyContentChanged=function(e,t){this.SetCurrentValue(n.HasContentProperty,!!t)},n.IsBusyProperty=DependencyProperty.Register("IsBusy",function(){return Boolean},n,!1),n.HasContentProperty=DependencyProperty.RegisterReadOnly("HasContent",function(){return Boolean},n,!1),n.BusyContentProperty=DependencyProperty.Register("BusyContent",function(){return Object},n,void 0,function(e,t){return e.OnBusyContentChanged(t.OldValue,t.NewValue)}),n.BusyContentTemplateProperty=DependencyProperty.Register("BusyContentTemplate",function(){return e.DataTemplate},n),n.OverlayStyleProperty=DependencyProperty.Register("OverlayStyle",function(){return e.Style},n),n}(t.ContentControl);t.BusyIndicator=n}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(n){var o=function(n){function o(){n.apply(this,arguments)}return __extends(o,n),o.prototype.IsItemItsOwnContainer=function(e){return e instanceof t.MenuItem||e instanceof t.Separator},o.prototype.GetContainerForItem=function(){return new t.MenuItem},o.prototype.PrepareContainerForItem=function(r,i){n.prototype.PrepareContainerForItem.call(this,r,i);var a=r;if(a instanceof t.MenuItem&&(a.ParentMenuBase=this,a!=i)){var s=this.ItemTemplate,l=this.ItemContainerStyle;null!=s&&a.SetValue(e.Controls.ItemsControl.ItemTemplateProperty,s),null!=l&&o.HasDefaultValue(a,t.HeaderedItemsControl.ItemContainerStyleProperty)&&a.SetValue(t.HeaderedItemsControl.ItemContainerStyleProperty,l),o.HasDefaultValue(a,t.HeaderedItemsControl.HeaderProperty)&&(a.Header=i),null!=s&&a.SetValue(t.HeaderedItemsControl.HeaderTemplateProperty,s),null!=l&&a.SetValue(e.FrameworkElement.StyleProperty,l)}},o.HasDefaultValue=function(e,t){return e.ReadLocalValue(t)===DependencyProperty.UnsetValue},o.ItemContainerStyleProperty=DependencyProperty.Register("ItemContainerStyle",function(){return e.Style},o),o}(e.Controls.ItemsControl);n.MenuBase=o}(n=t.Primitives||(t.Primitives={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=function(n){function o(){n.call(this),this.Opened=new e.RoutedEvent,this.Closed=new e.RoutedEvent,this._Owner=null,this._PopupAlignmentPoint=new Point,this._SettingIsOpen=!1,this._Popup=null,this._Overlay=null,this.DefaultStyleKey=o,this.$RootVisualTracker=new t.contextmenu.RootVisualTracker(this)}return __extends(o,n),o.prototype.OnHorizontalOffsetChanged=function(e){this.UpdateContextMenuPlacement()},o.prototype.OnVerticalOffsetChanged=function(e){this.UpdateContextMenuPlacement()},o.prototype.OnIsOpenChanged=function(e){this._SettingIsOpen||(e.NewValue===!0?this.OpenPopup(this.$RootVisualTracker.mousePosition):this.ClosePopup())},o.prototype.OnKeyDown=function(t){switch(t.Key){case e.Input.Key.Escape:this.ClosePopup(),t.Handled=!0;break;case e.Input.Key.Up:this.FocusNextItem(!1),t.Handled=!0;break;case e.Input.Key.Down:this.FocusNextItem(!0),t.Handled=!0}n.prototype.OnKeyDown.call(this,t)},o.prototype.OnMouseLeftButtonDown=function(e){e.Handled=!0,n.prototype.OnMouseLeftButtonDown.call(this,e)},o.prototype.OnMouseRightButtonDown=function(e){e.Handled=!0,n.prototype.OnMouseRightButtonDown.call(this,e)},Object.defineProperty(o.prototype,"Owner",{get:function(){return this._Owner},set:function(t){if(this._Owner){var n=this._Owner instanceof e.FrameworkElement?this._Owner:null;n&&n.MouseRightButtonDown.off(this._HandleOwnerMouseRightButtonDown,this)}this._Owner=t,this._Owner&&(n=this._Owner instanceof e.FrameworkElement?this._Owner:null,n&&n.MouseRightButtonDown.on(this._HandleOwnerMouseRightButtonDown,this))},enumerable:!0,configurable:!0}),o.prototype._HandleOwnerMouseRightButtonDown=function(e,t){this.OpenPopup(t.GetPosition(null)),t.Handled=!0},o.prototype._HandleOverlayMouseButtonDown=function(e,t){this.ClosePopup(),t.Handled=!0},o.prototype._HandleContextMenuSizeChanged=function(e,t){this.UpdateContextMenuPlacement()},o.prototype.ChildMenuItemClicked=function(){this.ClosePopup()},o.prototype.UpdateContextMenuPlacement=function(){var e=this._PopupAlignmentPoint,n=this.$RootVisualTracker.getAvailableSize(),o=Math.max(0,Math.min(e.x+this.HorizontalOffset,n.width-this.ActualWidth)),r=Math.max(0,Math.min(e.y+this.VerticalOffset,n.height-this.ActualHeight));t.Canvas.SetLeft(this,o),t.Canvas.SetTop(this,r);var i=this._Overlay;i&&(i.Width=n.width,i.Height=n.height)},o.prototype.OpenPopup=function(n){var o=this;this._PopupAlignmentPoint=n;var r=new t.Canvas;r.Background=new e.Media.SolidColorBrush(Color.KnownColors.Transparent),this._Overlay=r,this._Overlay.MouseLeftButtonDown.on(this._HandleOverlayMouseButtonDown,this),this._Overlay.MouseRightButtonDown.on(this._HandleOverlayMouseButtonDown,this),this._Overlay.Children.Add(this);for(var i=this._Popup=new t.Primitives.Popup,a=this._Owner;a&&!(a instanceof e.UIElement);)a=a.Parent;if(a&&(i.XamlNode.RegisterInitiator(a),this.$RootVisualTracker.tryInit(a)),i.Child=this._Overlay,this.SizeChanged.on(this._HandleContextMenuSizeChanged,this),this.$RootVisualTracker.setOnSizeChanged(function(e){return o.UpdateContextMenuPlacement()}),this.UpdateContextMenuPlacement(),this.ReadLocalValue(e.DependencyObject.DataContextProperty)===DependencyProperty.UnsetValue){var s=new e.Data.Binding("DataContext");s.Source=this.Owner||this.$RootVisualTracker.rootVisual,this.SetBinding(e.DependencyObject.DataContextProperty,s)}i.IsOpen=!0,this.Focus(),this._SettingIsOpen=!0,this.IsOpen=!0,this._SettingIsOpen=!1,this.OnOpened(new e.RoutedEventArgs)},o.prototype.OnOpened=function(e){this.Opened.raise(this,e)},o.prototype.ClosePopup=function(){this._Popup&&(this._Popup.IsOpen=!1,this._Popup.Child=null,this._Popup=null),this._Overlay&&(this._Overlay.Children.Clear(),this._Overlay=null),this.SizeChanged.off(this._HandleContextMenuSizeChanged,this),this.$RootVisualTracker.setOnSizeChanged(),this._SettingIsOpen=!0,this.IsOpen=!1,this._SettingIsOpen=!1,this.OnClosed(new e.RoutedEventArgs)},o.prototype.OnClosed=function(e){this.Closed.raise(this,e)},o.prototype.FocusNextItem=function(n){var o=this.Items.Count,r=n?-1:o,i=e.Surface.GetFocusedElement(this);i instanceof t.MenuItem&&this===i.ParentMenuBase&&(r=this.ItemContainersManager.IndexFromContainer(i));var a,s=r;do s=(s+o+(n?1:-1))%o,a=this.ItemContainersManager.ContainerFromIndex(s),a instanceof t.MenuItem||(a=null);while(!(a&&a.IsEnabled&&a.Focus()||s===r))},o.HorizontalOffsetProperty=DependencyProperty.Register("HorizontalOffset",function(){return Number},o,0),o.VerticalOffsetProperty=DependencyProperty.Register("VerticalOffset",function(){return Number},o,0),o.IsOpenProperty=DependencyProperty.Register("IsOpen",function(){return Boolean},o,!1),o}(t.Primitives.MenuBase);t.ContextMenu=n}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=function(){function n(){}return n.GetContextMenu=function(e){return e.GetValue(n.ContextMenuProperty)},n.SetContextMenu=function(e,t){e.SetValue(n.ContextMenuProperty,t)},n.OnContextMenuPropertyChanged=function(n,o){var r=n;if(r instanceof e.FrameworkElement){var i=o.OldValue;i instanceof t.ContextMenu&&(i.Owner=null);var a=o.NewValue;a instanceof t.ContextMenu&&(a.Owner=r)}},n.ContextMenuProperty=DependencyProperty.RegisterAttached("ContextMenu",function(){return t.ContextMenu},n,void 0,n.OnContextMenuPropertyChanged),n}();t.ContextMenuService=n}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){function n(t,n,o){return isNaN(t)?o:e.Localization.Format("{0:d"+n+"}",t)}var o=function(e){function o(){e.call(this),this._MonthTextBox=null,this._DayTextBox=null,this._YearTextBox=null,this._MonthGesture=new t.Internal.EventGesture,this._DayGesture=new t.Internal.EventGesture,this._YearGesture=new t.Internal.EventGesture,this._SelectionHandler=null,this.DefaultStyleKey=o}return __extends(o,e),o.prototype.OnSelectedMonthChanged=function(e){this.CoerceMonth(e.NewValue),this.CoerceDate()},o.prototype.OnSelectedDayChanged=function(e){this.CoerceDay(e.NewValue),this.CoerceDate()},o.prototype.OnSelectedYearChanged=function(e){this.CoerceYear(e.NewValue),this.CoerceDate()},o.prototype.OnSelectedDateChanged=function(e){var t=e.NewValue;t instanceof DateTime?(this.CoerceMonth(t.Month),this.CoerceDay(t.Day),this.CoerceYear(t.Year)):(this.CoerceMonth(NaN),this.CoerceDay(NaN),this.CoerceYear(NaN))},o.prototype.OnApplyTemplate=function(){var n=this;e.prototype.OnApplyTemplate.call(this),this._MonthGesture.Detach(),this._MonthTextBox=this.GetTemplateChild("MonthTextBox",t.TextBox),this._MonthTextBox&&this._MonthGesture.Attach(this._MonthTextBox.LostFocus,function(e){return n.CoerceMonth(e.Text)}),this._DayGesture.Detach(),this._DayTextBox=this.GetTemplateChild("DayTextBox",t.TextBox),this._DayTextBox&&this._DayGesture.Attach(this._DayTextBox.LostFocus,function(e){return n.CoerceDay(e.Text)}),this._YearGesture.Detach(),this._YearTextBox=this.GetTemplateChild("YearTextBox",t.TextBox),this._YearTextBox&&this._YearGesture.Attach(this._YearTextBox.LostFocus,function(e){return n.CoerceDay(e.Text)}),this._SelectionHandler&&this._SelectionHandler.Dispose(),this._SelectionHandler=new t.Internal.SelectionHandler([this._MonthTextBox,this._DayTextBox,this._YearTextBox]),this._UpdateText()},o.prototype.CoerceMonth=function(e){e=Math.max(1,Math.min(12,e)),isNaN(e)&&isNaN(this.SelectedMonth)||this.SetCurrentValue(o.SelectedMonthProperty,e),this._UpdateText()},o.prototype.CoerceDay=function(e){e=Math.max(1,Math.min(31,parseFloat(e))),isNaN(e)&&isNaN(this.SelectedDay)||this.SetCurrentValue(o.SelectedDayProperty,e),this._UpdateText()},o.prototype.CoerceYear=function(e){var t=DateTime.MaxValue.Year-1;e=Math.min(t,Math.max(0,e)),isNaN(e)&&isNaN(this.SelectedYear)||this.SetCurrentValue(o.SelectedYearProperty,e),this._UpdateText()},o.prototype.CoerceDate=function(){var e=this.SelectedMonth,t=this.SelectedDay,n=this.SelectedYear;if(!(isNaN(e)||isNaN(t)||isNaN(n))){var r=new DateTime(n,e,t);0!==DateTime.Compare(r,this.SelectedDate)&&this.SetCurrentValue(o.SelectedDateProperty,r)}},o.prototype._UpdateText=function(){this._MonthTextBox&&(this._MonthTextBox.Text=n(this.SelectedMonth,2,"MM")),this._DayTextBox&&(this._DayTextBox.Text=n(this.SelectedDay,2,"DD")),this._YearTextBox&&(this._YearTextBox.Text=n(this.SelectedYear,4,"YYYY"))},o.SelectedMonthProperty=DependencyProperty.Register("SelectedMonth",function(){return Number},o,NaN,function(e,t){return e.OnSelectedMonthChanged(t)}),o.SelectedDayProperty=DependencyProperty.Register("SelectedDay",function(){return Number},o,NaN,function(e,t){return e.OnSelectedDayChanged(t)}),o.SelectedYearProperty=DependencyProperty.Register("SelectedYear",function(){return Number},o,NaN,function(e,t){return e.OnSelectedYearChanged(t)}),o.SelectedDateProperty=DependencyProperty.Register("SelectedDate",function(){return DateTime},o,void 0,function(e,t){return e.OnSelectedDateChanged(t)}),o}(t.Control);t.DatePicker=o,t.TemplateParts(o,{Name:"MonthTextBox",Type:t.TextBox},{Name:"DayTextBox",Type:t.TextBox},{Name:"YearTextBox",Type:t.TextBox}),t.TemplateVisualStates(o,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"ValidationStates",Name:"Valid"},{GroupName:"ValidationStates",Name:"InvalidFocused"},{GroupName:"ValidationStates",Name:"InvalidUnfocused"})}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){!function(e){e[e.None=0]="None",e[e.Increase=1]="Increase",e[e.Decrease=2]="Decrease"}(e.ValidSpinDirections||(e.ValidSpinDirections={}));var t=e.ValidSpinDirections;e.Library.addEnum(t,"ValidSpinDirections"),function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"}(e.SpinDirection||(e.SpinDirection={}));var n=e.SpinDirection;e.Library.addEnum(n,"SpinDirection"),function(e){e[e.UseFallbackItem=0]="UseFallbackItem",e[e.TextBoxCannotLoseFocus=1]="TextBoxCannotLoseFocus"}(e.InvalidInputAction||(e.InvalidInputAction={}));var o=e.InvalidInputAction;e.Library.addEnum(o,"InvalidInputAction"),function(e){e[e.Left=0]="Left",e[e.Top=1]="Top",e[e.Right=2]="Right",e[e.Bottom=3]="Bottom"}(e.Dock||(e.Dock={}));var r=e.Dock;e.Library.addEnum(r,"Dock"),function(e){e[e.Long=0]="Long",e[e.Short=1]="Short"}(e.DatePickerFormat||(e.DatePickerFormat={}));var i=e.DatePickerFormat;e.Library.addEnum(i,"DatePickerFormat"),function(e){e[e.Regular=0]="Regular",e[e.Military=1]="Military"}(e.TimeDisplayMode||(e.TimeDisplayMode={}));var a=e.TimeDisplayMode;e.Library.addEnum(a,"TimeDisplayMode"),function(e){e[e.None=0]="None",e[e.ObjectErrors=1]="ObjectErrors",e[e.PropertyErrors=2]="PropertyErrors",e[e.All=3]="All"}(e.ValidationSummaryFilters||(e.ValidationSummaryFilters={}));var s=e.ValidationSummaryFilters;e.Library.addEnum(s,"ValidationSummaryFilters"),function(e){e[e.ObjectError=1]="ObjectError",e[e.PropertyError=2]="PropertyError"}(e.ValidationSummaryItemType||(e.ValidationSummaryItemType={}));var l=e.ValidationSummaryItemType;e.Library.addEnum(l,"ValidationSummaryItemType"),function(e){e[e.UpOnly=0]="UpOnly",e[e.DownOnly=1]="DownOnly",e[e.Both=2]="Both"}(e.StretchDirection||(e.StretchDirection={}));var u=e.StretchDirection;e.Library.addEnum(u,"StretchDirection")}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=t.Primitives.ButtonBase,o=function(o){function r(){o.call(this),this.Spin=new e.RoutedEvent,this._IncreaseButton=null,this._DecreaseButton=null,this.DefaultStyleKey=r}return __extends(r,o),r.prototype.OnContentChanged=function(e,t){},r.prototype.OnValidSpinDirectionChanged=function(e){this.UpdateVisualState(!0),this.EnableButtons()},r.prototype.OnSpin=function(e){var n=e.Direction===t.SpinDirection.Increase?t.ValidSpinDirections.Increase:t.ValidSpinDirections.Decrease;if((this.ValidSpinDirection&n)!==n)throw new InvalidOperationException("Invalid Spin Direction");this.Spin.raise(this,e)},r.prototype.OnApplyTemplate=function(){o.prototype.OnApplyTemplate.call(this),this._IncreaseButton&&this._IncreaseButton.Click.off(this.OnIncreaseClick,this),this._IncreaseButton=this.GetTemplateChild("IncreaseButton",n),this._IncreaseButton&&this._IncreaseButton.Click.on(this.OnIncreaseClick,this),this._DecreaseButton&&this._DecreaseButton.Click.off(this.OnDecreaseClick,this),this._DecreaseButton=this.GetTemplateChild("DecreaseButton",n),this._DecreaseButton&&this._DecreaseButton.Click.on(this.OnDecreaseClick,this),this.UpdateVisualState(!1),this.EnableButtons()},r.prototype.OnIncreaseClick=function(e,n){this.OnSpin(new t.SpinEventArgs(t.SpinDirection.Increase))},r.prototype.OnDecreaseClick=function(e,n){this.OnSpin(new t.SpinEventArgs(t.SpinDirection.Decrease))},r.prototype.EnableButtons=function(){this._IncreaseButton&&(this._IncreaseButton.IsEnabled=(this.ValidSpinDirection&t.ValidSpinDirections.Increase)===t.ValidSpinDirections.Increase),this._DecreaseButton&&(this._DecreaseButton.IsEnabled=(this.ValidSpinDirection&t.ValidSpinDirections.Decrease)===t.ValidSpinDirections.Decrease)},r.prototype.GoToStates=function(e){o.prototype.GoToStates.call(this,e),this.GoToStateIncrease(e),this.GoToStateDecrease(e)},r.prototype.GoToStateCommon=function(e){return e(this.IsEnabled?this.IsMouseOver?"MouseOver":"Normal":"Disabled")},r.prototype.GoToStateIncrease=function(e){return e((this.ValidSpinDirection&t.ValidSpinDirections.Increase)===t.ValidSpinDirections.Increase?"IncreaseEnabled":"IncreaseDisabled")},r.prototype.GoToStateDecrease=function(e){return e((this.ValidSpinDirection&t.ValidSpinDirections.Decrease)===t.ValidSpinDirections.Decrease?"DecreaseEnabled":"DecreaseDisabled")},r.prototype.OnMouseEnter=function(e){o.prototype.OnMouseEnter.call(this,e),this.UpdateVisualState()},r.prototype.OnMouseLeave=function(e){o.prototype.OnMouseLeave.call(this,e),this.UpdateVisualState()},r.prototype.OnMouseLeftButtonDown=function(e){this.UpdateVisualState(),o.prototype.OnMouseLeftButtonDown.call(this,e)},r.prototype.OnMouseLeftButtonUp=function(e){o.prototype.OnMouseLeftButtonUp.call(this,e),this.UpdateVisualState()},r.prototype.OnGotFocus=function(e){o.prototype.OnGotFocus.call(this,e),this.UpdateVisualState()},r.prototype.OnLostFocus=function(e){o.prototype.OnLostFocus.call(this,e),this.UpdateVisualState()},r.ContentProperty=DependencyProperty.Register("Content",function(){return Object},r,void 0,function(e,t){return e.OnContentChanged(t.OldValue,t.NewValue)}),r.ValidSpinDirectionProperty=DependencyProperty.Register("ValidSpinDirection",function(){return new e.Enum(t.ValidSpinDirections)},r,t.ValidSpinDirections.Increase,function(e,t){return e.OnValidSpinDirectionChanged(t)}),r}(t.Control);t.Spinner=o,e.Markup.Content(o,o.ContentProperty),t.TemplateVisualStates(o,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"MouseOver"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"FocusStates",Name:"Unfocused"},{GroupName:"FocusStates",Name:"Focused"},{GroupName:"IncreaseStates",Name:"IncreaseEnabled"},{GroupName:"IncreaseStates",Name:"IncreaseDisabled"},{GroupName:"DecreaseStates",Name:"DecreaseEnabled"},{GroupName:"DecreaseStates",Name:"DecreaseDisabled"}),t.TemplateParts(o,{Name:"IncreaseButton",Type:t.Primitives.ButtonBase},{Name:"DecreaseButton",Type:t.Primitives.ButtonBase})}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=function(n){function o(){n.apply(this,arguments),this._IgnoreValueChange=!1,this._TextBox=null,this._Spinner=null,this._Text="",this.ValueChanging=new e.RoutedPropertyChangingEvent,this.ValueChanged=new e.RoutedPropertyChangedEvent,this.Parsing=new e.RoutedEvent,this.ParseError=new e.RoutedEvent}return __extends(o,n),o.prototype.OnSpinnerStyleChanged=function(e,t){},o.prototype._OnValueChanged=function(t){if(!this._IgnoreValueChange){var n=t.OldValue,o=t.NewValue,r=new e.RoutedPropertyChangingEventArgs(t.Property,n,o,!0);if(this.OnValueChanging(r),!r.InCoercion)if(r.Cancel)this._IgnoreValueChange=!0,this.Value=n,this._IgnoreValueChange=!1;else{var i=r.NewValue,a=new e.RoutedPropertyChangedEventArgs(n,i);this.OnValueChanged(a)}}},o.prototype.OnValueChanging=function(e){this.ValueChanging.raise(this,e)},o.prototype.OnValueChanged=function(e){this.ValueChanged.raise(this,e),this.SetTextBoxText()},o.prototype.OnIsEditableChanged=function(e){this._TextBox||(this._TextBox.IsReadOnly=!this.IsEditable)},o.prototype.OnApplyTemplate=function(){n.prototype.OnApplyTemplate.call(this),this.SetTextBox(this.GetTemplateChild("Text")),this.SetSpinner(this.GetTemplateChild("Spinner")),this.SetTextBoxText(),null!=this._TextBox&&(this._TextBox.IsReadOnly=!this.IsEditable),this.UpdateVisualState(!1)},o.prototype.SetTextBox=function(e){this._TextBox&&(this._TextBox.GotFocus.off(this.TextBox_GotFocus,this),this._TextBox.LostFocus.off(this.TextBox_LostFocus,this)),e instanceof t.TextBox?this._TextBox=e:this._TextBox=null,this._TextBox.GotFocus.on(this.TextBox_GotFocus,this),this._TextBox.LostFocus.on(this.TextBox_LostFocus,this),this._Text=this._TextBox.Text},o.prototype.SetSpinner=function(e){this._Spinner&&this._Spinner.Spin.off(this.Spinner_Spin,this),e instanceof t.Spinner?this._Spinner=e:this._Spinner=null,this._Spinner&&this._Spinner.Spin.on(this.Spinner_Spin,this)},o.prototype.OnKeyDown=function(t){if(n.prototype.OnKeyDown.call(this,t),!t.Handled)switch(t.Key){case e.Input.Key.Enter:this.ProcessUserInput(),t.Handled=!0;break;case e.Input.Key.Up:this.DoIncrement(),t.Handled=!0;break;case e.Input.Key.Down:this.DoDecrement(),t.Handled=!0}},o.prototype.OnMouseWheel=function(e){n.prototype.OnMouseWheel.call(this,e),e.Handled||(e.Delta<0?this.DoDecrement():0<e.Delta&&this.DoIncrement(),e.Handled=!0)},o.prototype.ApplyValue=function(e){var n,o=new t.UpDownParsingEventArgs(e),r=null;try{n=this.ParseValue(e),o.Value=n}catch(i){r=i}try{this.OnParsing(o)}catch(i){}if(null==r){var a=o.Handled?o.Value:n;this.Value;this.Value===a&&this.SetTextBoxText(),this.Value=a}else if(o.Handled)this.Value===o.Value&&this.SetTextBoxText(),this.Value=o.Value;else{var s=new t.UpDownParseErrorEventArgs(e,r);this.OnParseError(s),s.Handled||this.SetTextBoxText()}},o.prototype.OnParseError=function(e){this.ParseError.raise(this,e)},o.prototype.OnParsing=function(e){this.Parsing.raise(this,e)},o.prototype.ParseValue=function(e){},o.prototype.FormatValue=function(){return""},o.prototype.SelectAllText=function(){this._TextBox&&this._TextBox.SelectAll()},o.prototype.SetTextBoxText=function(){this._TextBox&&(this._Text=this.FormatValue()||"",this._TextBox.Text=this._Text,this._TextBox.SelectionStart=this._Text.length)},o.prototype.TextBox_LostFocus=function(e,t){this.ProcessUserInput()},o.prototype.TextBox_GotFocus=function(e,t){this.SelectAllText()},o.prototype.Spinner_Spin=function(e,t){this._TextBox&&this.ProcessUserInput(),this.OnSpin(t)},o.prototype.OnSpin=function(e){e.Direction===t.SpinDirection.Increase?this.DoIncrement():this.DoDecrement()},o.prototype.ProcessUserInput=function(){if(this._TextBox&&this._Text!==this._TextBox.Text){var e=this._TextBox.SelectionStart;this._Text=this._TextBox.Text,this.ApplyValue(this._Text),e<this._TextBox.Text.length&&(this._TextBox.SelectionStart=e)}},o.prototype.DoDecrement=function(){this._Spinner&&(this._Spinner.ValidSpinDirection&t.ValidSpinDirections.Decrease)!==t.ValidSpinDirections.Decrease||this.OnDecrement()},o.prototype.OnDecrement=function(){},o.prototype.DoIncrement=function(){this._Spinner&&(this._Spinner.ValidSpinDirection&t.ValidSpinDirections.Increase)!==t.ValidSpinDirections.Increase||this.OnIncrement()},o.prototype.OnIncrement=function(){},o.SpinnerStyleProperty=DependencyProperty.Register("SpinnerStyle",function(){return e.Style},o,void 0,function(e,t){return e.OnSpinnerStyleChanged(t.OldValue,t.NewValue)}),o.IsEditableProperty=DependencyProperty.Register("IsEditable",function(){return Boolean},o,!0,function(e,t){return e.OnIsEditableChanged(t)}),o}(t.Control);t.UpDownBase=n,t.TemplateVisualStates(n,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"MouseOver"},{GroupName:"CommonStates",Name:"Pressed"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"FocusStates",Name:"Unfocused"},{GroupName:"FocusStates",Name:"Focused"}),t.TemplateParts(n,{Name:"Text",Type:t.TextBox},{Name:"Spinner",Type:t.Spinner})}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){function n(e,n,o){switch(o){case t.InvalidInputAction.UseFallbackItem:case t.InvalidInputAction.TextBoxCannotLoseFocus:return!0;default:return!1}}function o(e,t,n){return e?n===(e.GetDynamicValue(t)||""):n===t.toString()}var r=function(r){function i(){var n=this;r.call(this),this.ValueChanging=new e.RoutedPropertyChangingEvent,this.ParseError=new e.RoutedEvent,this._ValueBindingEvaluator=null,this._CanEditByFocus=!1,this.DefaultStyleKey=i,Object.defineProperty(this,"Items",{value:new t.Internal.ObservableObjectCollection,writable:!1}),this.Items.CollectionChanged.on(this._OnItemsChanged,this),this._Coercer=new t.Internal.DomainCoercer(this,function(e){return n.SetCurrentValue(i.ValueProperty,e)},function(e){return n.SetCurrentValue(i.CurrentIndexProperty,e)})}return __extends(i,r),i.prototype.OnValueChanged=function(e,t){},i.prototype.OnCurrentIndexChanged=function(e,t){this.UpdateValidSpinDirection()},i.prototype._OnIsCyclicChanged=function(e){this.UpdateValidSpinDirection()},i.prototype._OnItemsSourceChanged=function(t,n){var o=e.Collections.INotifyCollectionChanged_.as(t);if(o&&o.CollectionChanged.off(this._ItemsSourceModified,this),this.Items.IsReadOnly=!1,this.Items.Clear(),n){var r,i=nullstone.IEnumerable_.as(n);if(i){var a=i.getEnumerator();for(r=[];a.moveNext();)r.push(a.current)}else n instanceof Array&&(r=n);r&&(this.Items.AddRange(r),this.Items.IsReadOnly=!0),o=e.Collections.INotifyCollectionChanged_.as(n),o&&o.CollectionChanged.on(this._ItemsSourceModified,this)}},i.prototype._ItemsSourceModified=function(t,n){var o,r=t;switch(this.Items.IsReadOnly=!1,n.Action){case e.Collections.CollectionChangedAction.Add:o=n.NewStartingIndex;for(var i=nullstone.IEnumerator_.fromArray(n.NewItems);i.moveNext();)this.Items.Insert(o,i.current),o++;break;case e.Collections.CollectionChangedAction.Remove:for(var i=nullstone.IEnumerator_.fromArray(n.OldItems);i.moveNext();)this.Items.RemoveAt(n.OldStartingIndex);break;case e.Collections.CollectionChangedAction.Replace:o=n.NewStartingIndex;for(var i=nullstone.IEnumerator_.fromArray(n.NewItems);i.moveNext();)this.Items.SetValueAt(o,i.current),o++;break;case e.Collections.CollectionChangedAction.Reset:this.Items.Clear(),this.Items.AddRange(r.ToArray())}this.Items.IsReadOnly=!0},i.prototype._OnItemsChanged=function(e,t){this._Coercer.UpdateTextBoxText()},Object.defineProperty(i.prototype,"ValueMemberPath",{get:function(){var e=this.ValueMemberBinding;return e?e.Path.Path:null},set:function(t){var n=this.ValueMemberBinding;if(t)if(null!=n){var o=new e.Data.Binding(t);o.Converter=n.Converter,o.ConverterCulture=n.ConverterCulture,o.ConverterParameter=n.ConverterParameter,this.ValueMemberBinding=o}else this.ValueMemberBinding=new e.Data.Binding(t);else{if(!n)return;var o=new e.Data.Binding;o.Converter=n.Converter,o.ConverterCulture=n.ConverterCulture,o.ConverterParameter=n.ConverterParameter,this.ValueMemberBinding=o}},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"ValueMemberBinding",{get:function(){var e=this._ValueBindingEvaluator;return e?e.ValueBinding:null},set:function(e){this._ValueBindingEvaluator=new t.Internal.BindingSourceEvaluator(e)},enumerable:!0,configurable:!0}),i.prototype.OnApplyTemplate=function(){r.prototype.OnApplyTemplate.call(this),this._SpinFlow&&this._SpinFlow.Dispose(),this._SpinFlow=new t.Internal.SpinFlow(this,this.GetTemplateChild("Spinner",t.Spinner)),this._Coercer.Detach(),this._Coercer.Attach(this.GetTemplateChild("Text",t.TextBox)),this.UpdateValidSpinDirection(),this.UpdateVisualState()},i.prototype.OnGotFocus=function(e){r.prototype.OnGotFocus.call(this,e),this.UpdateVisualState(),this.IsEnabled&&this.TryEnterEditMode()},i.prototype.OnLostFocus=function(e){r.prototype.OnLostFocus.call(this,e),this.UpdateVisualState(),this.IsEnabled&&this._Coercer.EscapeFocus()},i.prototype.OnMouseEnter=function(e){r.prototype.OnMouseEnter.call(this,e),this.UpdateVisualState()},i.prototype.OnMouseLeave=function(e){r.prototype.OnMouseLeave.call(this,e),this.UpdateVisualState()},i.prototype.OnMouseLeftButtonDown=function(e){r.prototype.OnMouseLeftButtonDown.call(this,e),this.UpdateVisualState()},i.prototype.OnMouseLeftButtonUp=function(e){r.prototype.OnMouseLeftButtonUp.call(this,e),this.UpdateVisualState(),this.IsEnabled&&!this._Coercer.IsEditing&&(this.Focus(),this.TryEnterEditMode())},i.prototype.GoToStates=function(e){r.prototype.GoToStates.call(this,e),this.GoToStateEditing(e),this.GoToStateValid(e)},i.prototype.GoToStateEditing=function(e){return e(this._Coercer.IsEditing?"Edit":"Display")},i.prototype.GoToStateValid=function(e){return e(this._Coercer.IsInvalidInput?"InvalidDomain":"ValidDomain")},i.prototype.UpdateValidSpinDirection=function(){if(this._SpinFlow){var e=this.IsCyclic,t=this.CurrentIndex;this._SpinFlow.UpdateValid(e||t>0,e||t<this.Items.Count-1)}},i.prototype.TryEnterEditMode=function(){this._Coercer.IsEditing||!this._CanEditByFocus&&this.IsEditable&&(this._Coercer.IsEditing=!0)},i.prototype.OnIsEditingChanged=function(e){this.UpdateVisualState()},i.prototype.OnIsInvalidInputChanged=function(e){this.UpdateVisualState()},i.prototype.OnSpin=function(){this._Coercer.ProcessUserInput()},i.prototype.OnIncrement=function(){var e=this;this.CurrentIndex<this.Items.Count-1?this.CurrentIndex++:this.IsCyclic&&(this.CurrentIndex=0),this._Coercer.IsInvalidInput=!1,this._CanEditByFocus=!0,this.Focus(),window.setTimeout(function(){return e._CanEditByFocus=!1},1)},i.prototype.OnDecrement=function(){var e=this;this.CurrentIndex>0?this.CurrentIndex--:this.IsCyclic&&(this.CurrentIndex=this.Items.Count-1),this._Coercer.IsInvalidInput=!1,this._CanEditByFocus=!0,this.Focus(),window.setTimeout(function(){return e._CanEditByFocus=!1},1)},i.prototype.TryParseValue=function(e,n){if(!e)return n.Value=this.Value,!0;for(var r=this._ValueBindingEvaluator,i=this.Items.getEnumerator();i.moveNext()&&null==n.Value;)n.Value=o(r,i.current,e);if(null!=n.Value)return!0;if(n.Value=this.Value,this.InvalidInputAction===t.InvalidInputAction.TextBoxCannotLoseFocus)return!1;if(this.InvalidInputAction===t.InvalidInputAction.UseFallbackItem&&(n.Value=this.FallbackItem,null==n.Value||!this.Items.Contains(n.Value)))throw new ArgumentException("Cannot parse value.");return!0},i.prototype.FormatValue=function(){var e=this.Value;if(!e)return"";if(!this.Items.Contains(e))return"";try{var t=this._ValueBindingEvaluator;t&&(e=t.GetDynamicValue(e))}catch(n){}return"string"==typeof e?e:""},i.ValueProperty=DependencyProperty.Register("Value",function(){return Object},i,null,function(e,t){return e._Coercer.OnValueChanged(t.OldValue,t.NewValue)}),i.IsEditableProperty=DependencyProperty.Register("IsEditable",function(){return Boolean},i,!1,function(e,t){return e._Coercer.UpdateIsEditable()}),i.SpinnerStyleProperty=DependencyProperty.Register("SpinnerStyle",function(){return e.Style},i),i.CurrentIndexProperty=DependencyProperty.Register("CurrentIndex",function(){return Number},i,-1,function(e,t){return e._Coercer.OnCurrentIndexChanged(t.OldValue,t.NewValue)}),i.IsCyclicProperty=DependencyProperty.Register("IsCyclic",function(){return Boolean},i,!1,function(e,t){return e._OnIsCyclicChanged(t)}),i.InvalidInputActionProperty=DependencyProperty.RegisterFull("InvalidInputAction",function(){return new e.Enum(t.InvalidInputAction)},i,t.InvalidInputAction.UseFallbackItem,void 0,void 0,!1,n,!0),i.FallbackItemProperty=DependencyProperty.Register("FallbackItem",function(){return Object},i,null),i.ItemsSourceProperty=DependencyProperty.Register("ItemsSource",function(){return nullstone.IEnumerable_},i,void 0,function(e,t){return e._OnItemsSourceChanged(t.OldValue,t.NewValue)}),i.ItemTemplateProperty=DependencyProperty.Register("ItemTemplate",function(){return e.DataTemplate},i),i}(t.Control);t.DomainUpDown=r,t.TemplateVisualStates(r,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"MouseOver"},{GroupName:"CommonStates",Name:"Pressed"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"FocusStates",Name:"Unfocused"},{GroupName:"FocusStates",Name:"Focused"},{GroupName:"ValidationStates",Name:"Valid"},{GroupName:"ValidationStates",Name:"InvalidUnfocused"},{GroupName:"ValidationStates",Name:"InvalidFocused"},{GroupName:"DomainStates",Name:"ValidDomain"},{GroupName:"DomainStates",Name:"InvalidDomain"})}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=10,o=function(o){function r(){o.call(this),this._HorizontalTemplate=null,this._VerticalTemplate=null,this._DragStart=null,this._IsDragging=!1,this.DefaultStyleKey=r,this._Helper=new t.Internal.GridSplitterResizer(this),this.LayoutUpdated.on(this._OnLayoutUpdated,this)}return __extends(r,o),r.prototype.OnApplyTemplate=function(){o.prototype.OnApplyTemplate.call(this),this._HorizontalTemplate=this.GetTemplateChild("HorizontalTemplate",e.FrameworkElement),this._VerticalTemplate=this.GetTemplateChild("VerticalTemplate",e.FrameworkElement),this._Helper.UpdateResizeDirection(this),this._OnResizeDirectionChanged(),this.UpdateVisualState()},r.prototype._OnLayoutUpdated=function(e,t){
this._Helper&&this._Helper.UpdateResizeDirection(this)&&this._OnResizeDirectionChanged()},r.prototype._OnResizeDirectionChanged=function(){var n=this._Helper.Direction===t.Internal.GridResizeDirection.Columns;this.Cursor=n?e.CursorType.SizeWE:e.CursorType.SizeNS;var o=this._HorizontalTemplate;o&&(o.Visibility=n?e.Visibility.Collapsed:e.Visibility.Visible);var r=this._VerticalTemplate;r&&(r.Visibility=n?e.Visibility.Visible:e.Visibility.Collapsed)},r.prototype.OnGotFocus=function(e){o.prototype.OnGotFocus.call(this,e),this.UpdateVisualState()},r.prototype.OnLostFocus=function(e){o.prototype.OnLostFocus.call(this,e),this.UpdateVisualState()},r.prototype.OnKeyDown=function(t){if(o.prototype.OnKeyDown.call(this,t),t.Key===e.Input.Key.Escape){if(!this._Helper)return;return this._Helper=null,void(t.Handled=!0)}if(this.IsFocused&&this.IsEnabled){var r=0,i=0;switch(t.Key){case e.Input.Key.Left:r=-n;break;case e.Input.Key.Up:i=-n;break;case e.Input.Key.Right:r=n;break;case e.Input.Key.Down:i=n}this.FlowDirection===e.FlowDirection.RightToLeft?t.Handled=this._HandleMove(-r,i,!0):t.Handled=this._HandleMove(r,i,!0)}},r.prototype.OnMouseLeftButtonDown=function(e){o.prototype.OnMouseLeftButtonDown.call(this,e),this.IsEnabled&&(this._IsDragging=this.CaptureMouse(),this._IsDragging&&(this._DragStart=this._GetTransformedPos(e),this.Focus(),this.InitHelper()))},r.prototype.OnMouseLeftButtonUp=function(e){o.prototype.OnMouseLeftButtonUp.call(this,e),this.ReleaseMouseCapture(),this._IsDragging=!1,this._Helper=null,this.UpdateVisualState()},r.prototype.OnMouseMove=function(e){if(o.prototype.OnMouseMove.call(this,e),this._IsDragging){var t=this._GetTransformedPos(e);t&&this._HandleMove(t.x-this._DragStart.x,t.y-this._DragStart.y,!1)}},r.prototype.InitHelper=function(){var e=this.VisualParent;e instanceof t.Grid&&(this._Helper=new t.Internal.GridSplitterResizer(this),this._Helper.Setup(this,e)||(this._Helper=null))},r.prototype._HandleMove=function(e,t,n){if(n){if(this._Helper)return!1;this.InitHelper()}return this._Helper?((!this._Helper.Move(this.VisualParent,e,t)||n)&&(this._Helper=null),!0):!1},r.prototype._GetTransformedPos=function(e){return this.RenderTransform?this.RenderTransform.Transform(e.GetPosition(this)):e.GetPosition(this)},r}(t.Control);t.GridSplitter=o}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){function n(e,t){return e.ReadLocalValue(t)===DependencyProperty.UnsetValue}var o=function(o){function r(){o.call(this),this._HeaderIsItem=!1,this.DefaultStyleKey=r,this._ItemsControlHelper=new t.Internal.ItemsControlHelper(this)}return __extends(r,o),r.prototype.OnHeaderChanged=function(e,t){},r.prototype.OnHeaderTemplateChanged=function(e,t){},r.prototype.OnItemContainerStyleChanged=function(e){this._ItemsControlHelper.UpdateItemContainerStyle(e.NewValue)},r.prototype.OnApplyTemplate=function(){o.prototype.OnApplyTemplate.call(this),this._ItemsControlHelper.OnApplyTemplate()},r.prototype.PrepareContainerForItem=function(n,i){var a=n;a instanceof t.Control||(a=null);var s=this.ItemContainerStyle;null!=s&&null!=a&&null==a.Style&&a.SetValue(e.FrameworkElement.StyleProperty,s);var l=n;l instanceof r&&r.PrepareHeaderedItemsControlContainer(l,i,this,s),o.prototype.PrepareContainerForItem.call(this,n,i)},r.PrepareHeaderedItemsControlContainer=function(o,i,a,s){if(o!==i){var l=a.ItemTemplate;null!=l&&o.SetValue(t.ItemsControl.ItemTemplateProperty,l),null!=s&&n(o,r.ItemContainerStyleProperty)&&o.SetValue(r.ItemContainerStyleProperty,s),(o._HeaderIsItem||n(o,r.HeaderProperty))&&(o.Header=i,o._HeaderIsItem=!0),null!=l&&o.SetValue(r.HeaderTemplateProperty,l),null!=s&&null==o.Style&&o.SetValue(e.FrameworkElement.StyleProperty,s);var u=l;if(u instanceof e.HierarchicalDataTemplate){var c=u.GetBindingExpression(e.HierarchicalDataTemplate.ItemsSourceProperty);if(c){var p=new e.Data.Binding(c.ParentBinding);p.Source=o.Header,o.SetBinding(t.ItemsControl.ItemsSourceProperty,p)}void 0!==u.ItemTemplate&&o.ItemTemplate===l&&(o.ClearValue(t.ItemsControl.ItemTemplateProperty),null!=u.ItemTemplate&&(o.ItemTemplate=u.ItemTemplate)),void 0!==u.ItemContainerStyle&&o.ItemContainerStyle===s&&(o.ClearValue(r.ItemContainerStyleProperty),null!=u.ItemContainerStyle&&(o.ItemContainerStyle=u.ItemContainerStyle))}}},r.HeaderProperty=DependencyProperty.Register("Header",function(){return Object},r,void 0,function(e,t){return e.OnHeaderChanged(t.OldValue,t.NewValue)}),r.HeaderTemplateProperty=DependencyProperty.Register("HeaderTemplate",function(){return e.DataTemplate},r,void 0,function(e,t){return e.OnHeaderTemplateChanged(t.OldValue,t.NewValue)}),r.ItemContainerStyleProperty=DependencyProperty.Register("ItemContainerStyle",function(){return e.Style},r,void 0,function(e,t){return e.OnItemContainerStyleChanged(t)}),r}(t.ItemsControl);t.HeaderedItemsControl=o}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=function(n){function o(){n.call(this),this.Click=new e.RoutedEvent,this.DefaultStyleKey=o,this.UpdateIsEnabled()}return __extends(o,n),o.prototype.OnCommandChanged=function(t){var n=e.Input.ICommand_.as(t.OldValue);n&&n.CanExecuteChanged.off(this._CanExecuteChanged,this);var o=e.Input.ICommand_.as(t.NewValue);o&&o.CanExecuteChanged.on(this._CanExecuteChanged,this),this.UpdateIsEnabled()},o.prototype._CanExecuteChanged=function(e,t){this.UpdateIsEnabled()},o.prototype.OnCommandParameterChanged=function(e){this.UpdateIsEnabled()},o.prototype.OnApplyTemplate=function(){n.prototype.OnApplyTemplate.call(this),this.UpdateVisualState(!1)},o.prototype.UpdateIsEnabled=function(){this.IsEnabled=null==this.Command||this.Command.CanExecute(this.CommandParameter),this.UpdateVisualState(!0)},o.prototype.OnGotFocus=function(e){n.prototype.OnGotFocus.call(this,e),this.UpdateVisualState(!0)},o.prototype.OnLostFocus=function(e){n.prototype.OnLostFocus.call(this,e),this.UpdateVisualState(!0)},o.prototype.OnMouseEnter=function(e){n.prototype.OnMouseEnter.call(this,e),this.Focus(),this.UpdateVisualState(!0)},o.prototype.OnMouseLeave=function(e){n.prototype.OnMouseLeave.call(this,e),null!=this.ParentMenuBase&&this.ParentMenuBase.Focus(),this.UpdateVisualState(!0)},o.prototype.OnMouseLeftButtonDown=function(e){e.Handled||(this.OnClick(),e.Handled=!0),n.prototype.OnMouseLeftButtonDown.call(this,e)},o.prototype.OnMouseRightButtonDown=function(e){e.Handled||(this.OnClick(),e.Handled=!0),n.prototype.OnMouseRightButtonDown.call(this,e)},o.prototype.OnKeyDown=function(t){t.Handled||e.Input.Key.Enter!==t.Key||(this.OnClick(),t.Handled=!0),n.prototype.OnKeyDown.call(this,t)},o.prototype.OnClick=function(){var n=this.ParentMenuBase;n instanceof t.ContextMenu&&n.ChildMenuItemClicked(),this.Click.raise(this,new e.RoutedEventArgs),null!=this.Command&&this.Command.CanExecute(this.CommandParameter)&&this.Command.Execute(this.CommandParameter)},o.prototype.GoToStateCommon=function(e){return e(this.IsEnabled?"Normal":"Disabled")},o.CommandProperty=DependencyProperty.Register("Command",function(){return e.Input.ICommand_},o,void 0,function(e,t){return e.OnCommandChanged(t)}),o.CommandParameterProperty=DependencyProperty.Register("CommandParameter",function(){return Object},o,void 0,function(e,t){return e.OnCommandParameterChanged(t)}),o.IconProperty=DependencyProperty.Register("Icon",function(){return Object},o),o}(e.Controls.HeaderedItemsControl);t.MenuItem=n,t.TemplateVisualStates(n,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"FocusStates",Name:"Unfocused"},{GroupName:"FocusStates",Name:"Focused"})}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=function(n){function o(){var r=this;n.call(this),this.Parsing=new e.RoutedEvent,this.ParseError=new e.RoutedEvent,this.DefaultStyleKey=o,this._Coercer=new t.Internal.FormattedRangeCoercer(this,function(e){return r.SetCurrentValue(o.MaximumProperty,e)},function(e){return r.SetCurrentValue(o.ValueProperty,e)},function(){r._Formatter&&r._Formatter.UpdateTextBoxText()})}return __extends(o,n),o.prototype.OnMinimumChanged=function(e,t){this.UpdateValidSpinDirection()},o.prototype.OnMaximumChanged=function(e,t){this.UpdateValidSpinDirection()},o.prototype.OnValueChanged=function(e,t){this.UpdateValidSpinDirection(),this._Formatter&&this._Formatter.UpdateTextBoxText()},o.prototype.OnIncrementChanged=function(e,t){},o.prototype.OnDecimalPlacesChanged=function(e,t){},o.prototype.OnApplyTemplate=function(){var e=this;n.prototype.OnApplyTemplate.call(this),this._SpinFlow&&this._SpinFlow.Dispose(),this._SpinFlow=new t.Internal.SpinFlow(this,this.GetTemplateChild("Spinner",t.Spinner)),this._Formatter&&this._Formatter.Dispose(),this._Formatter=new t.Internal.TextBoxFormatter(this,this.GetTemplateChild("Text",t.TextBox),function(t){return e.SetCurrentValue(o.ValueProperty,t)}),this.UpdateValidSpinDirection(),this.UpdateVisualState(!1)},o.prototype.UpdateValidSpinDirection=function(){if(this._SpinFlow){var e=this.Value;this._SpinFlow.UpdateValid(e<this.Maximum,e>this.Minimum)}},o.prototype.ParseValue=function(e){return parseFloat(e)},o.prototype.FormatValue=function(e){return e.toFixed(this.DecimalPlaces)},o.prototype.OnSpin=function(){this._Formatter.ProcessUserInput()},o.prototype.OnIncrement=function(){this._Coercer.AddToValue(this.Increment)},o.prototype.OnDecrement=function(){this._Coercer.AddToValue(-this.Increment)},o.MinimumProperty=DependencyProperty.Register("Minimum",function(){return Number},o,0,function(e,t){return e._Coercer.OnMinimumChanged(t.OldValue,t.NewValue)}),o.MaximumProperty=DependencyProperty.Register("Maximum",function(){return Number},o,100,function(e,t){return e._Coercer.OnMaximumChanged(t.OldValue,t.NewValue)}),o.ValueProperty=DependencyProperty.Register("Value",function(){return Number},o,0,function(e,t){return e._Coercer.OnValueChanged(t.OldValue,t.NewValue)}),o.IncrementProperty=DependencyProperty.Register("Increment",function(){return Number},o,1,function(e,t){return e.OnIncrementChanged(t.OldValue,t.NewValue)}),o.DecimalPlacesProperty=DependencyProperty.Register("DecimalPlaces",function(){return Number},o,0,function(e,t){return e._Coercer.OnDecimalPlacesChanged(t.OldValue,t.NewValue)}),o.SpinnerStyleProperty=DependencyProperty.Register("SpinnerStyle",function(){return e.Style},o),o.IsEditableProperty=DependencyProperty.Register("IsEditable",function(){return Boolean},o,!0,function(e,t){return e._Formatter.UpdateIsEditable()}),o}(t.Control);t.NumericUpDown=n,t.TemplateVisualStates(n,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"MouseOver"},{GroupName:"CommonStates",Name:"Pressed"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"FocusStates",Name:"Unfocused"},{GroupName:"FocusStates",Name:"Focused"},{GroupName:"ValidationStates",Name:"Valid"},{GroupName:"ValidationStates",Name:"InvalidUnfocused"},{GroupName:"ValidationStates",Name:"InvalidFocused"}),t.TemplateParts(n,{Name:"Text",Type:t.TextBox},{Name:"Spinner",Type:t.Spinner})}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t=function(e){function t(){e.call(this),this.DefaultStyleKey=t}return __extends(t,e),t}(e.Control);e.Separator=t}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=function(e){function t(t){e.call(this),Object.defineProperty(this,"Direction",{value:t,writable:!1})}return __extends(t,e),t}(e.RoutedEventArgs);t.SpinEventArgs=n}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=function(n){function o(){n.call(this),this.SelectionChanged=new e.RoutedEvent,this._UpdateIndex=!0,this._DesiredIndex=0,this.DefaultStyleKey=o}return __extends(o,n),o.prototype.OnApplyTemplate=function(){n.prototype.OnApplyTemplate.call(this),null!=this._ElementTabPanelTop&&this._ElementTabPanelTop.Children.Clear(),null!=this._ElementTabPanelBottom&&this._ElementTabPanelBottom.Children.Clear(),null!=this._ElementTabPanelLeft&&this._ElementTabPanelLeft.Children.Clear(),null!=this._ElementTabPanelRight&&this._ElementTabPanelRight.Children.Clear();var o=this._GetContentHost(this.TabStripPlacement);null!=o&&(o.Content=null),this._ElementTemplateTop=this.GetTemplateChild("TemplateTop",e.FrameworkElement),this._ElementTemplateBottom=this.GetTemplateChild("TemplateBottom",e.FrameworkElement),this._ElementTemplateLeft=this.GetTemplateChild("TemplateLeft",e.FrameworkElement),this._ElementTemplateRight=this.GetTemplateChild("TemplateRight",e.FrameworkElement),this._ElementTabPanelTop=this.GetTemplateChild("TabPanelTop",t.TabPanel),this._ElementTabPanelBottom=this.GetTemplateChild("TabPanelBottom",t.TabPanel),this._ElementTabPanelLeft=this.GetTemplateChild("TabPanelLeft",t.TabPanel),this._ElementTabPanelRight=this.GetTemplateChild("TabPanelRight",t.TabPanel),t.TabPanel.setTabAlignment(this._ElementTabPanelTop,t.Dock.Top),t.TabPanel.setTabAlignment(this._ElementTabPanelBottom,t.Dock.Bottom),t.TabPanel.setTabAlignment(this._ElementTabPanelLeft,t.Dock.Left),t.TabPanel.setTabAlignment(this._ElementTabPanelRight,t.Dock.Right),this._ElementContentTop=this.GetTemplateChild("ContentTop",t.ContentPresenter),this._ElementContentBottom=this.GetTemplateChild("ContentBottom",t.ContentPresenter),this._ElementContentLeft=this.GetTemplateChild("ContentLeft",t.ContentPresenter),this._ElementContentRight=this.GetTemplateChild("ContentRight",t.ContentPresenter);for(var r=this.Items.getEnumerator();r.moveNext();){var i=r.current;i instanceof t.TabItem||this._ThrowInvalidTabItem(i),this._AddToTabPanel(i)}this.SelectedIndex>=0&&this.UpdateSelectedContent(this.SelectedContent),this.UpdateTabPanelLayout(this.TabStripPlacement,this.TabStripPlacement),this.UpdateVisualState(!1)},o.prototype.OnSelectedItemChanged=function(e){var t=e.OldValue,n=e.NewValue,o=null==n?-1:this.Items.IndexOf(n);null!=n&&-1===o?this.SelectedItem=t:(this.SelectedIndex=o,this.SelectItem(t,n))},o.prototype.OnSelectedIndexChanged=function(e){var t=e.NewValue,n=e.OldValue;if(-1>t)throw new ArgumentException("'"+t.toString()+"' is not a valid value for property 'SelectedIndex'");if(this._UpdateIndex?this._DesiredIndex=t:this._UpdateIndex||(this._UpdateIndex=!0),t>=this.Items.Count)this._UpdateIndex=!1,this.SelectedIndex=n;else{var o;if(t>=0&&t<this.Items.Count&&(o=this.Items.GetValueAt(t)),this.SelectedItem===o)return;this.SelectedItem=o}},o.prototype.OnSelectedContentChanged=function(e){this.UpdateSelectedContent(e.NewValue)},o.prototype.OnTabStripPlacementPropertyChanged=function(e){this.UpdateTabPanelLayout(e.OldValue,e.NewValue);for(var t,n=this.Items.getEnumerator();n.moveNext();)t=n.current,null!=t&&t.UpdateVisualState()},o.prototype.OnItemsChanged=function(o){switch(n.prototype.OnItemsChanged.call(this,o),o.Action){case e.Collections.CollectionChangedAction.Add:for(var r=-1,i=o.NewItems.length,a=0;i>a;a++){var s=o.NewItems[a],l=s;l instanceof t.TabItem||this._ThrowInvalidTabItem(l);var u=this.Items.IndexOf(l);this._InsertIntoTabPanel(u,l),l.IsSelected?r=u:this.SelectedItem!==this._GetItemAtIndex(this.SelectedIndex)?r=this.Items.IndexOf(this.SelectedItem):this._DesiredIndex<this.Items.Count&&this._DesiredIndex>=0&&(r=this._DesiredIndex),l.UpdateVisualState()}if(-1===r){for(var c=this.Items.getEnumerator();c.moveNext();){var l=c.current;if(l instanceof t.TabItem||this._ThrowInvalidTabItem(l),l.IsSelected)return}if(this.Items.Count<=1){var p=this.Items.GetValueAt(0),h=p.ReadLocalValue(t.TabItem.IsSelectedProperty);h!==!1&&(r=0)}else r=0}this.SelectedItem=this._GetItemAtIndex(r),this.SelectedIndex=r;break;case e.Collections.CollectionChangedAction.Remove:for(var l,i=o.OldItems.length,a=0;i>a;a++)l=o.OldItems[a],this._RemoveFromTabPanel(l),0===this.Items.Count?this.SelectedIndex=-1:this.Items.Count<=this.SelectedIndex?this.SelectedIndex=this.Items.Count-1:this.SelectedItem=this._GetItemAtIndex(this.SelectedIndex);break;case e.Collections.CollectionChangedAction.Reset:this._ClearTabPanel(),this.SelectedIndex=-1;for(var l,c=this.Items.getEnumerator();c.moveNext();)l=c.current,l instanceof t.TabItem||this._ThrowInvalidTabItem(l),this._AddToTabPanel(l),l.IsSelected&&(this.SelectedItem=l);if(-1!==this.SelectedIndex||this.Items.Count<=0)break;this.SelectedIndex=0}},o.prototype.OnKeyDown=function(t){if(n.prototype.OnKeyDown.call(this,t),!t.Handled){var o;switch(t.Key){case e.Input.Key.End:o=this._FindEndTabItem();break;case e.Input.Key.Home:o=this._FindHomeTabItem();break;default:return}null!=o&&o!==this.SelectedItem&&(t.Handled=!0,this.SelectedItem=o,o.Focus())}},o.prototype._FindEndTabItem=function(){for(var t=this.Items,n=t.Count,o=null,r=n-1;r>=0;r--)if(o=t.GetValueAt(r),o.IsEnabled&&o.Visibility===e.Visibility.Visible)return o;return null},o.prototype._FindHomeTabItem=function(){for(var t=this.Items,n=t.Count,o=null,r=0;n>r;r++)if(o=t.GetValueAt(r),o.IsEnabled&&o.Visibility===e.Visibility.Visible)return o;return null},o.prototype.SelectItem=function(e,n){if(null==n){var r=this._GetContentHost(this.TabStripPlacement);null!=r&&(r.Content=null),this.SetValue(o.SelectedContentProperty,null)}for(var i,a=this.Items.getEnumerator();a.moveNext();){var i=a.current;i instanceof t.TabItem||this._ThrowInvalidTabItem(i),i!==n&&i.IsSelected?i.IsSelected=!1:i===n&&(i.IsSelected=!0,this.SetValue(o.SelectedContentProperty,i.Content))}var s=[];null!=e&&s.push(e);var l=[];null!=n&&l.push(n);var u=new t.Primitives.SelectionChangedEventArgs(s,l);this.OnSelectionChanged(u),this.SelectionChanged.raise(this,u)},o.prototype.OnSelectionChanged=function(e){},o.prototype.UpdateTabPanelLayout=function(n,o){var r=this._GetTemplate(n),i=this._GetTemplate(o),a=this._GetTabPanel(n),s=this._GetTabPanel(o),l=this._GetContentHost(n),u=this._GetContentHost(o);if(n!==o){if(null!=r&&(r.Visibility=e.Visibility.Collapsed),null!=a&&a.Children.Clear(),null!=s)for(var c,p=this.Items.getEnumerator();p.moveNext();)c=p.current,c instanceof t.TabItem||this._ThrowInvalidTabItem(c),this._AddToTabPanel(c);null!=l&&(l.Content=null),null!=u&&(u.Content=this.SelectedContent)}null!=i&&(i.Visibility=e.Visibility.Visible)},o.prototype.UpdateSelectedContent=function(e){var n=this.SelectedItem;if(n instanceof t.TabItem){var o=this._GetContentHost(this.TabStripPlacement);null!=o&&(o.HorizontalAlignment=n.HorizontalContentAlignment,o.VerticalAlignment=n.VerticalContentAlignment,o.ContentTemplate=n.ContentTemplate,o.Content=e)}},o.prototype.EnsureLanguageBinding=function(t){if(null!=t){var n=t.Content;if(n instanceof e.FrameworkElement&&n.ReadLocalValue(e.FrameworkElement.LanguageProperty)===DependencyProperty.UnsetValue){var o=new e.Data.Binding("Language");o.Source=this,n.SetBinding(e.FrameworkElement.LanguageProperty,o)}}},o.prototype.ClearLanguageBinding=function(t){if(null!=t){var n=t.Content;n instanceof e.FrameworkElement&&n.ReadLocalValue(e.FrameworkElement.LanguageProperty)===DependencyProperty.UnsetValue&&n.ClearValue(e.FrameworkElement.LanguageProperty)}},o.prototype._AddToTabPanel=function(e){var t=this._GetTabPanel(this.TabStripPlacement);t&&!t.Children.Contains(e)&&(t.Children.Add(e),this.EnsureLanguageBinding(e))},o.prototype._InsertIntoTabPanel=function(e,t){var n=this._GetTabPanel(this.TabStripPlacement);n&&!n.Children.Contains(t)&&n.Children.Insert(e,t)},o.prototype._RemoveFromTabPanel=function(e){var t=this._GetTabPanel(this.TabStripPlacement);t&&t.Children.Contains(e)&&t.Children.Remove(e)},o.prototype._ClearTabPanel=function(){var e=this._GetTabPanel(this.TabStripPlacement);if(e){for(var t=e.Children.getEnumerator();t.moveNext();){var n=t.current;null!=n&&this.ClearLanguageBinding(n)}e.Children.Clear()}},o.prototype._GetTabPanel=function(e){switch(e){case t.Dock.Left:return this._ElementTabPanelLeft;case t.Dock.Top:return this._ElementTabPanelTop;case t.Dock.Right:return this._ElementTabPanelRight;case t.Dock.Bottom:return this._ElementTabPanelBottom;default:return null}},o.prototype._GetTemplate=function(e){switch(e){case t.Dock.Left:return this._ElementTemplateLeft;case t.Dock.Top:return this._ElementTemplateTop;case t.Dock.Right:return this._ElementTemplateRight;case t.Dock.Bottom:return this._ElementTemplateBottom;default:return null}},o.prototype._GetContentHost=function(e){switch(e){case t.Dock.Left:return this._ElementContentLeft;case t.Dock.Top:return this._ElementContentTop;case t.Dock.Right:return this._ElementContentRight;case t.Dock.Bottom:return this._ElementContentBottom;default:return null}},o.prototype._GetItemAtIndex=function(e){if(0>e||e>=this.Items.Count)return null;var n=this.Items.GetValueAt(e);return n instanceof t.TabItem?n:void 0},o.prototype._ThrowInvalidTabItem=function(e){var t="object";try{t=e.constructor._TypeName}catch(n){}throw new ArgumentException("Unable to cast object of type '"+t+"' to type 'System.Windows.Controls.TabItem'.")},o.SelectedItemProperty=DependencyProperty.Register("SelectedItem",function(){return Object},o,null,function(e,t){return e.OnSelectedItemChanged(t)}),o.SelectedIndexProperty=DependencyProperty.Register("SelectedIndex",function(){return Number},o,-1,function(e,t){return e.OnSelectedIndexChanged(t)}),o.SelectedContentProperty=DependencyProperty.Register("SelectedContent",function(){return Object},o,null,function(e,t){return e.OnSelectedContentChanged(t)}),o.TabStripPlacementProperty=DependencyProperty.Register("TabStripPlacement",function(){return new e.Enum(t.Dock)},o,t.Dock.Top,function(e,t){return e.OnTabStripPlacementPropertyChanged(t)}),o}(t.ItemsControl);t.TabControl=n,t.TemplateVisualStates(n,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"Disabled"}),t.TemplateParts(n,{Name:"TemplateLeft",Type:e.FrameworkElement},{Name:"ContentLeft",Type:t.ContentPresenter},{Name:"TabPanelLeft",Type:t.TabPanel},{Name:"TemplateTop",Type:e.FrameworkElement},{Name:"ContentTop",Type:t.ContentPresenter},{Name:"TabPanelTop",Type:t.TabPanel},{Name:"TemplateRight",Type:e.FrameworkElement},{Name:"ContentRight",Type:t.ContentPresenter},{Name:"TabPanelRight",Type:t.TabPanel},{Name:"TemplateBottom",Type:e.FrameworkElement},{Name:"ContentBottom",Type:t.ContentPresenter},{Name:"TabPanelBottom",Type:t.TabPanel})}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=function(n){function r(){n.call(this),this._SelectedElements=new o,this._UnselectedElements=new o,this._PreviousTemplate=null,this._PreviousHeader=null,this.DefaultStyleKey=r}return __extends(r,n),Object.defineProperty(r.prototype,"TabStripPlacement",{get:function(){var e=this.TabControlParent;return null!=e?e.TabStripPlacement:t.Dock.Top},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"TabControlParent",{get:function(){return e.VisualTreeHelper.GetParentOfType(this,t.TabControl)},enumerable:!0,configurable:!0}),r.prototype.OnApplyTemplate=function(){n.prototype.OnApplyTemplate.call(this);var e=this._GetContentControl(this.IsSelected,this.TabStripPlacement);null!=e&&(e.Content=null),this._SelectedElements.OnApplyTemplate(this,!0),this._UnselectedElements.OnApplyTemplate(this,!1),this._UpdateHeaderVisuals(),this.UpdateVisualState(!1)},r.prototype._OnHeaderChanged=function(e){this.HasHeader=null!=e.NewValue,this.OnHeaderChanged(e.OldValue,e.NewValue)},r.prototype.OnHeaderChanged=function(e,t){this._UpdateHeaderVisuals()},r.prototype.OnHeaderTemplateChanged=function(e,t){this._UpdateHeaderVisuals()},r.prototype._OnIsSelectedChanged=function(t){var n=t.NewValue,o=new e.RoutedEventArgs;n?this.OnSelected(o):this.OnUnselected(o),this.IsTabStop=n,this.UpdateVisualState()},r.prototype.OnSelected=function(e){var t=this.TabControlParent;t&&(t.SelectedItem=this)},r.prototype.OnUnselected=function(e){var t=this.TabControlParent;t&&t.SelectedItem==this&&(t.SelectedIndex=-1)},r.prototype.UpdateVisualState=function(t){var o=this.GetTemplate(this.IsSelected,this.TabStripPlacement);null!=this._PreviousTemplate&&this._PreviousTemplate!==o&&(this._PreviousTemplate.Visibility=e.Visibility.Collapsed),this._PreviousTemplate=o,null!=o&&(o.Visibility=e.Visibility.Visible);var r=this._GetContentControl(this.IsSelected,this.TabStripPlacement);this._PreviousHeader&&this._PreviousHeader!==r&&(this._PreviousHeader.Content=null),this._PreviousHeader=r,this._UpdateHeaderVisuals(),n.prototype.UpdateVisualState.call(this,t)},r.prototype._UpdateHeaderVisuals=function(){var e=this._GetContentControl(this.IsSelected,this.TabStripPlacement);e&&(e.Content=this.Header,e.ContentTemplate=this.HeaderTemplate)},r.prototype.OnMouseLeave=function(e){this.UpdateVisualState()},r.prototype.OnMouseEnter=function(e){this.UpdateVisualState()},r.prototype.OnMouseLeftButtonDown=function(e){this.IsEnabled&&this.TabControlParent&&!this.IsSelected&&!e.Handled&&(this.IsTabStop=!0,e.Handled=this.Focus(),this.TabControlParent.SelectedIndex=this.TabControlParent.Items.IndexOf(this))},r.prototype.OnGotFocus=function(e){n.prototype.OnGotFocus.call(this,e),this.SetValueInternal(r.IsFocusedProperty,!0),this.UpdateVisualState()},r.prototype.OnLostFocus=function(e){n.prototype.OnLostFocus.call(this,e),this.SetValueInternal(r.IsFocusedProperty,!1),this.UpdateVisualState()},r.prototype.OnContentChanged=function(e,t){n.prototype.OnContentChanged.call(this,e,t);var o=this.TabControlParent;o&&this.IsSelected&&(o.SelectedContent=t)},r.prototype.OnKeyDown=function(t){if(n.prototype.OnKeyDown.call(this,t),!t.Handled){var o=this.TabControlParent,r=e.Input.InteractionHelper.GetLogicalKey(this.FlowDirection,t.Key),i=o.Items.IndexOf(this),a=null;switch(r){case e.Input.Key.Left:case e.Input.Key.Up:a=this._FindPreviousTabItem(i);break;case e.Input.Key.Right:case e.Input.Key.Down:a=this._FindNextTabItem(i);break;default:return}a&&a!==o.SelectedItem&&(t.Handled=!0,o.SelectedItem=a,a.Focus())}},r.prototype.GetTemplate=function(e,n){var o=e?this._SelectedElements:this._UnselectedElements;return o[t.Dock[n]].Template},r.prototype._GetContentControl=function(e,n){var o=e?this._SelectedElements:this._UnselectedElements;return o[t.Dock[n]].Header},r.prototype._FindPreviousTabItem=function(t){for(var n=t,o=this.TabControlParent.Items;n>=0;n--){var r=o.GetValueAt(n);if(r.IsEnabled&&r.Visibility===e.Visibility.Visible)return r}return null},r.prototype._FindNextTabItem=function(t){for(var n=t,o=this.TabControlParent.Items,r=o.Count;r>n;n++){var i=o.GetValueAt(n);if(i.IsEnabled&&i.Visibility===e.Visibility.Visible)return i}return null},r.HasHeaderProperty=DependencyProperty.Register("HasHeader",function(){return Boolean},r,!1),r.HeaderProperty=DependencyProperty.Register("Header",function(){return Object},r,null,function(e,t){return e._OnHeaderChanged(t)}),r.HeaderTemplateProperty=DependencyProperty.Register("HeaderTemplate",function(){return e.DataTemplate},r,void 0,function(e,t){return e.OnHeaderTemplateChanged(t.OldValue,t.NewValue)}),r.IsFocusedProperty=DependencyProperty.Register("IsFocused",function(){return Boolean},r,!1),r.IsSelectedProperty=DependencyProperty.Register("IsSelected",function(){return Boolean},r,!1,function(e,t){return e._OnIsSelectedChanged(t)}),r}(t.ContentControl);t.TabItem=n,t.TemplateVisualStates(n,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"MouseOver"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"FocusStates",Name:"Unfocused"},{GroupName:"FocusStates",Name:"Focused"},{GroupName:"SelectionStates",Name:"Unselected"},{GroupName:"SelectionStates",Name:"Selected"}),t.TemplateParts(n,{Name:"HeaderLeftSelected",Type:e.FrameworkElement},{Name:"HeaderTopSelected",Type:e.FrameworkElement},{Name:"HeaderRightSelected",Type:e.FrameworkElement},{Name:"HeaderBottomSelected",Type:e.FrameworkElement},{Name:"TemplateLeftSelected",Type:e.FrameworkElement},{Name:"TemplateTopSelected",Type:e.FrameworkElement},{Name:"TemplateRightSelected",Type:e.FrameworkElement},{Name:"TemplateBottomSelected",Type:e.FrameworkElement},{Name:"HeaderLeftUnselected",Type:e.FrameworkElement},{Name:"HeaderTopUnselected",Type:e.FrameworkElement},{Name:"HeaderRightUnselected",Type:e.FrameworkElement},{Name:"HeaderBottomUnselected",Type:e.FrameworkElement},{Name:"TemplateLeftUnselected",Type:e.FrameworkElement},{Name:"TemplateTopUnselected",Type:e.FrameworkElement},{Name:"TemplateRightUnselected",Type:e.FrameworkElement},{Name:"TemplateBottomUnselected",Type:e.FrameworkElement});var o=function(){function e(){this.Top=new r,this.Bottom=new r,this.Left=new r,this.Right=new r}return e.prototype.OnApplyTemplate=function(e,t){this.Top.OnApplyTemplate(e,t,"Top"),this.Bottom.OnApplyTemplate(e,t,"Bottom"),this.Left.OnApplyTemplate(e,t,"Left"),this.Right.OnApplyTemplate(e,t,"Right")},e}(),r=function(){function n(){this.Header=null,this.Template=null}return n.prototype.OnApplyTemplate=function(n,o,r){var i=r+(o?"Selected":"Unselected");this.Header=n.GetTemplateChild("Header"+i,t.ContentControl),this.Template=n.GetTemplateChild("Template"+i,e.FrameworkElement)},n}()}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){function n(t,n,o){return isNaN(t)?o:e.Localization.Format("{0:d"+n+"}",t)}var o=function(o){function r(){o.call(this),this._HourTextBox=null,this._MinuteTextBox=null,this._SecondTextBox=null,this._SecondSeparator=null,this._SuffixTextBlock=null,this._HourGesture=new t.Internal.EventGesture,this._MinuteGesture=new t.Internal.EventGesture,this._SecondGesture=new t.Internal.EventGesture,this._SuffixGesture=new t.Internal.EventGesture,this._SelectionHandler=null,this.DefaultStyleKey=r,this.CoerceTime()}return __extends(r,o),r.prototype.OnSelectedHourChanged=function(e){this.CoerceHour(e.NewValue),this.CoerceTime()},r.prototype.OnSelectedMinuteChanged=function(e){this.CoerceMinute(e.NewValue),this.CoerceTime()},r.prototype.OnSelectedSecondChanged=function(e){this.CoerceSecond(e.NewValue),this.CoerceTime()},r.prototype.OnSelectedTimeChanged=function(e){var t=e.NewValue;t instanceof TimeSpan?(this.CoerceHour(t.Hours),this.CoerceMinute(t.Minutes),this.CoerceSecond(t.Seconds)):(this.CoerceHour(NaN),this.CoerceMinute(NaN),this.CoerceSecond(NaN))},r.prototype.OnDisplayModeChanged=function(e){this._UpdateText()},r.prototype.OnApplyTemplate=function(){var n=this;o.prototype.OnApplyTemplate.call(this),this._HourGesture.Detach(),this._HourTextBox=this.GetTemplateChild("HourTextBox",t.TextBox),this._HourTextBox&&this._HourGesture.Attach(this._HourTextBox.LostFocus,function(e){return n.CoerceHour(n._GetHourInput())}),this._MinuteGesture.Detach(),this._MinuteTextBox=this.GetTemplateChild("MinuteTextBox",t.TextBox),this._MinuteTextBox&&this._MinuteGesture.Attach(this._MinuteTextBox.LostFocus,function(e){return n.CoerceMinute(e.Text)}),this._SecondGesture.Detach(),this._SecondTextBox=this.GetTemplateChild("SecondTextBox",t.TextBox),this._SecondTextBox&&this._SecondGesture.Attach(this._SecondTextBox.LostFocus,function(e){return n.CoerceSecond(e.Text)}),this._SecondSeparator=this.GetTemplateChild("SecondSeparator",e.FrameworkElement),this._SuffixGesture.Detach(),this._SuffixTextBlock=this.GetTemplateChild("SuffixTextBlock",t.TextBlock),this._SuffixTextBlock&&this._SuffixGesture.Attach(this._SuffixTextBlock.MouseLeftButtonUp,function(e){return n.ToggleAmPm()}),this._SelectionHandler&&this._SelectionHandler.Dispose(),this._SelectionHandler=new t.Internal.SelectionHandler([this._HourTextBox,this._MinuteTextBox,this._SecondTextBox]),this._UpdateText()},r.prototype._GetHourInput=function(){var e=this._HourTextBox.Text;if(this.DisplayMode===t.TimeDisplayMode.Military)return e;var n=parseFloat(e),o=!!this._SuffixTextBlock&&"AM"===this._SuffixTextBlock.Text;return o&&12===n?"00":!o&&12>n?(n+12).toString():e},r.prototype.CoerceHour=function(e){e=Math.max(0,Math.min(23,e)),e=e||0,this.SetCurrentValue(r.SelectedHourProperty,e),this._UpdateText()},r.prototype.CoerceMinute=function(e){e=Math.max(0,Math.min(59,e)),e=e||0,this.SetCurrentValue(r.SelectedMinuteProperty,e),this._UpdateText()},r.prototype.CoerceSecond=function(e){e=Math.max(0,Math.min(59,e)),e=e||0,this.SetCurrentValue(r.SelectedSecondProperty,e),
this._UpdateText()},r.prototype.CoerceTime=function(){var e=new TimeSpan(this.SelectedHour,this.SelectedMinute,this.SelectedSecond),t=this.SelectedTime;t&&0===e.CompareTo(t)||this.SetCurrentValue(r.SelectedTimeProperty,e)},r.prototype.ToggleAmPm=function(){var e=this.SelectedHour;e>=12?e-=12:e+=12,this.CoerceHour(e)},r.prototype._UpdateText=function(){var o=this.DisplayMode===t.TimeDisplayMode.Military,r=this.SelectedHour,i=this.SelectedMinute,a=this.SelectedSecond,s=this.IsSecondsShown,l=r;o||(l=l>=12?l-12:l,l=0===l?12:l),this._HourTextBox&&(this._HourTextBox.Text=n(l,2,"00")),this._MinuteTextBox&&(this._MinuteTextBox.Text=n(i,2,"00")),this._SecondTextBox&&(this._SecondTextBox.Text=n(a,2,"00"),this._SecondTextBox.Visibility=s?e.Visibility.Visible:e.Visibility.Collapsed),this._SecondSeparator&&(this._SecondSeparator.Visibility=s?e.Visibility.Visible:e.Visibility.Collapsed),this._SuffixTextBlock&&(this._SuffixTextBlock.Visibility=o?e.Visibility.Collapsed:e.Visibility.Visible,this._SuffixTextBlock.Text=r>=12?"PM":"AM")},r.SelectedHourProperty=DependencyProperty.Register("SelectedHour",function(){return Number},r,0,function(e,t){return e.OnSelectedHourChanged(t)}),r.SelectedMinuteProperty=DependencyProperty.Register("SelectedMinute",function(){return Number},r,0,function(e,t){return e.OnSelectedMinuteChanged(t)}),r.SelectedSecondProperty=DependencyProperty.Register("SelectedSecond",function(){return Number},r,0,function(e,t){return e.OnSelectedSecondChanged(t)}),r.SelectedTimeProperty=DependencyProperty.Register("SelectedTime",function(){return TimeSpan},r,void 0,function(e,t){return e.OnSelectedTimeChanged(t)}),r.IsSecondsShownProperty=DependencyProperty.Register("IsSecondsShown",function(){return Boolean},r,!0,function(e,t){return e._UpdateText()}),r.DisplayModeProperty=DependencyProperty.Register("DisplayMode",function(){return new e.Enum(t.TimeDisplayMode)},r,t.TimeDisplayMode.Regular,function(e,t){return e.OnDisplayModeChanged(t)}),r}(t.Control);t.TimePicker=o,t.TemplateParts(o,{Name:"HourTextBox",Type:t.TextBox},{Name:"MinuteTextBox",Type:t.TextBox},{Name:"SecondTextBox",Type:t.TextBox},{Name:"SecondSeparator",Type:e.FrameworkElement},{Name:"SuffixTextBlock",Type:t.TextBlock}),t.TemplateVisualStates(o,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"ValidationStates",Name:"Valid"},{GroupName:"ValidationStates",Name:"InvalidFocused"},{GroupName:"ValidationStates",Name:"InvalidUnfocused"})}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=t.Internal.ScrollEx,o=function(o){function r(){o.call(this),this.SelectedItemChanged=new e.RoutedPropertyChangedEvent,this.DefaultStyleKey=r,this.ItemsControlHelper=new t.Internal.ItemsControlHelper(this)}return __extends(r,o),r.prototype.OnSelectedItemChanged=function(e){if(this._IgnorePropertyChange)this._IgnorePropertyChange=!1;else{if(!this._AllowWrite)throw this._IgnorePropertyChange=!0,this.SetValue(r.SelectedItemProperty,e.OldValue),new InvalidOperationException("Cannot set read-only property SelectedItem.");this.UpdateSelectedValue(e.NewValue)}},r.prototype.OnSelectedValueChanged=function(e){if(!this._IgnorePropertyChange){if(this._AllowWrite)return;throw this._IgnorePropertyChange=!0,this.SetValue(r.SelectedValueProperty,e.OldValue),new InvalidOperationException("Cannot set read-only property SelectedValue.")}this._IgnorePropertyChange=!1},r.prototype.OnSelectedValuePathChanged=function(e){this.UpdateSelectedValue(this.SelectedItem)},r.prototype.OnItemContainerStyleChanged=function(e){this.ItemsControlHelper.UpdateItemContainerStyle(e.NewValue)},r.prototype.OnApplyTemplate=function(){o.prototype.OnApplyTemplate.call(this),this.ItemsControlHelper.OnApplyTemplate(),this.UpdateVisualState(!1)},r.prototype.GetContainerForItem=function(){return new t.TreeViewItem},r.prototype.IsItemItsOwnContainer=function(e){return e instanceof t.TreeViewItem},r.prototype.PrepareContainerForItem=function(e,n){var r=e;r instanceof t.TreeViewItem&&(r.ParentItemsControl=this),t.Internal.ItemsControlHelper.PrepareContainerForItemOverride(e,this.ItemContainerStyle),t.HeaderedItemsControl.PrepareHeaderedItemsControlContainer(r,n,this,this.ItemContainerStyle),o.prototype.PrepareContainerForItem.call(this,e,n)},r.prototype.ClearContainerForItem=function(e,n){var r=e;r instanceof t.TreeViewItem&&(r.ParentItemsControl=null),o.prototype.ClearContainerForItem.call(this,e,n)},r.prototype.OnItemsChanged=function(t){if(!t)throw new ArgumentException("e");if(o.prototype.OnItemsChanged.call(this,t),null!=t.NewItems)for(var n=0,r=t.NewItems,i=r.length;i>n;n++)r[n].ParentItemsControl=this;switch(t.Action){case e.Collections.CollectionChangedAction.Remove:case e.Collections.CollectionChangedAction.Reset:null==this.SelectedItem||this.IsSelectedContainerHookedUp||this.SelectFirstItem();break;case e.Collections.CollectionChangedAction.Replace:var a=this.SelectedItem;null==a||null!=t.OldItems&&!nullstone.equals(a,t.OldItems[0])||this.ChangeSelection(a,this.SelectedContainer,!1)}if(t.OldItems)for(var n=0,r=t.OldItems,i=r.length;i>n;n++)r[n].ParentItemsControl=null},r.prototype.CheckForSelectedDescendents=function(e){var t=[];for(t.push(e);t.length>0;){var n=t.pop();n.IsSelected&&(n.IgnorePropertyChange=!0,n.IsSelected=!1,this.ChangeSelection(n,n,!0),null==this.SelectedContainer.ParentItemsControl&&(this.SelectedContainer.RequiresContainsSelectionUpdate=!0));for(var o=n.Items.getEnumerator();o.moveNext();)t.push(o.current)}},r.prototype.PropagateKeyDown=function(e){this.OnKeyDown(e)},r.prototype.OnKeyDown=function(t){if(o.prototype.OnKeyDown.call(this,t),!t.Handled&&this.IsEnabled)if(e.Input.Keyboard.HasControl())switch(t.Key){case e.Input.Key.PageUp:case e.Input.Key.PageDown:case e.Input.Key.End:case e.Input.Key.Home:case e.Input.Key.Left:case e.Input.Key.Up:case e.Input.Key.Right:case e.Input.Key.Down:n.HandleKey(this.ItemsControlHelper.ScrollHost,t.Key,this.FlowDirection)&&(t.Handled=!0)}else switch(t.Key){case e.Input.Key.PageUp:case e.Input.Key.PageDown:if(null!=this.SelectedContainer){if(!this.HandleScrollByPage(t.Key===e.Input.Key.PageUp))break;t.Handled=!0;break}if(!this.FocusFirstItem())break;t.Handled=!0;break;case e.Input.Key.End:if(!this.FocusLastItem())break;t.Handled=!0;break;case e.Input.Key.Home:if(!this.FocusFirstItem())break;t.Handled=!0;break;case e.Input.Key.Up:case e.Input.Key.Down:if(null!=this.SelectedContainer||!this.FocusFirstItem())break;t.Handled=!0}},r.prototype.HandleScrollByPage=function(e){var o=this.ItemsControlHelper.ScrollHost;if(null!=o){var r=o.ViewportHeight,i={Value:0},a={Value:0};n.GetTopAndBottom(this.SelectedContainer.HeaderElement||this.SelectedContainer,o,i,a);var s=null,l=this.SelectedContainer,u=this.SelectedContainer.ParentItemsControl;if(null!=u){if(e)for(var c;u!==this;u=c){var p=u;if(null!=p){if(c=p.ParentItemsControl,!c)break;l=p}break}for(var h=u.ItemContainersManager.IndexFromContainer(l),d=u.Items.Count;null!=u&&null!=l;){if(l.IsEnabled){var m={Value:0};if(l.HandleScrollByPage(e,o,r,i.Value,a.Value,m))return!0;if(NumberEx.IsGreaterThanClose(m.Value,r)){if(s===this.SelectedContainer||null==s)return e?this.SelectedContainer.HandleUpKey():this.SelectedContainer.HandleDownKey();break}s=l}if(h+=e?-1:1,h>=0&&d>h)l=u.ItemContainersManager.ContainerFromIndex(h),l instanceof t.TreeViewItem||(l=null);else if(u===this)l=null;else for(;null!=u;){var p=u instanceof t.TreeViewItem?u:null;if(u=p.ParentItemsControl,null!=u){if(d=u.Items.Count,h=u.ItemContainersManager.IndexFromContainer(p)+(e?-1:1),h>-1&&d>h){l=u.ItemContainersManager.ContainerFromIndex(h),l instanceof t.TreeViewItem||(l=null);break}u==this&&(l=null,u=null)}}}}if(null!=s)if(e){if(s!==this.SelectedContainer)return s.Focus()}else s.FocusInto()}return!1},r.prototype.OnMouseEnter=function(e){o.prototype.OnMouseEnter.call(this,e),this.UpdateVisualState()},r.prototype.OnMouseLeave=function(e){o.prototype.OnMouseLeave.call(this,e),this.UpdateVisualState()},r.prototype.OnMouseMove=function(e){o.prototype.OnMouseMove.call(this,e),this.UpdateVisualState()},r.prototype.OnMouseLeftButtonDown=function(e){o.prototype.OnMouseLeftButtonDown.call(this,e),!e.Handled&&this.HandleMouseButtonDown()&&(e.Handled=!0),this.UpdateVisualState()},r.prototype.HandleMouseButtonDown=function(){return this.SelectedContainer?(this.SelectedContainer.IsFocused||this.SelectedContainer.Focus(),!0):!1},r.prototype.OnMouseLeftButtonUp=function(e){o.prototype.OnMouseLeftButtonUp.call(this,e),this.UpdateVisualState()},r.prototype.OnGotFocus=function(e){o.prototype.OnGotFocus.call(this,e),this.UpdateVisualState()},r.prototype.OnLostFocus=function(e){o.prototype.OnLostFocus.call(this,e),this.UpdateVisualState()},r.prototype.ChangeSelection=function(t,n,o){if(!this.IsSelectionChangeActive){var r=null,i=null,a=!1,s=this.SelectedContainer;this.IsSelectionChangeActive=!0;try{o&&n!==s?(r=this.SelectedItem,null!=s&&(s.IsSelected=!1,s.UpdateContainsSelection(!1)),i=t,this.SelectedContainer=n,this.SelectedContainer.UpdateContainsSelection(!0),this.SelectedItem=t,this.UpdateSelectedValue(t),a=!0,this.ItemsControlHelper.ScrollIntoView(n.HeaderElement||n)):o||n!==s||(this.SelectedContainer.UpdateContainsSelection(!1),this.SelectedContainer=null,this.SelectedItem=null,this.SelectedValue=null,r=t,a=!0),n.IsSelected=o}finally{this.IsSelectionChangeActive=!1}a&&this.SelectedItemChanged.raise(this,new e.RoutedPropertyChangedEventArgs(r,i))}},r.prototype.UpdateSelectedValue=function(n){if(!n)return void this.ClearValue(r.SelectedValueProperty);var o=this.SelectedValuePath;if(o){var i=new e.Data.Binding(o);i.Source=n;var a=new t.ContentControl;a.SetBinding(t.ContentControl.ContentProperty,i),this.SelectedValue=a.Content,a.ClearValue(t.ContentControl.ContentProperty)}else this.SelectedValue=n},r.prototype.SelectFirstItem=function(){var e=this.ItemContainersManager.ContainerFromIndex(0),n=e instanceof t.TreeViewItem;n||(e=this.SelectedContainer),this.ChangeSelection(n?this.ItemContainersManager.ItemFromContainer(e):this.SelectedItem,e,n)},r.prototype.FocusFirstItem=function(){var e=this.ItemContainersManager.ContainerFromIndex(0);return e?e.IsEnabled&&e.Focus()?!0:e.FocusDown():!1},r.prototype.FocusLastItem=function(){for(var e=this.Items.Count-1;e>=0;--e){var n=this.ItemContainersManager.ContainerFromIndex(e);if(n instanceof t.TreeViewItem&&n.IsEnabled)return n.FocusInto()}return!1},r.SelectedItemProperty=DependencyProperty.Register("SelectedItem",function(){return Object},r,null,function(e,t){return e.OnSelectedItemChanged(t)}),r.SelectedValueProperty=DependencyProperty.Register("SelectedValue",function(){return Object},r,null,function(e,t){return e.OnSelectedValueChanged(t)}),r.SelectedValuePathProperty=DependencyProperty.Register("SelectedValuePath",function(){return String},r,"",function(e,t){return e.OnSelectedValuePathChanged(t)}),r.ItemContainerStyleProperty=DependencyProperty.Register("ItemContainerStyle",function(){return e.Style},r,null,function(e,t){return e.OnItemContainerStyleChanged(t)}),r}(t.ItemsControl);t.TreeView=o,t.TemplateVisualStates(o,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"MouseOver"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"FocusStates",Name:"Unfocused"},{GroupName:"FocusStates",Name:"Focused"},{GroupName:"ValidationStates",Name:"Valid"},{GroupName:"ValidationStates",Name:"InvalidUnfocused"},{GroupName:"ValidationStates",Name:"InvalidFocused"}),Object.defineProperty(o.prototype,"SelectedValue",{get:function(){return this.GetValue(o.SelectedValueProperty)},set:function(e){try{this._AllowWrite=!0,this.SetValue(o.SelectedValueProperty,e)}finally{this._AllowWrite=!1}}}),Object.defineProperty(o.prototype,"SelectedItem",{get:function(){return this.GetValue(o.SelectedItemProperty)},set:function(e){try{this._AllowWrite=!0,this.SetValue(o.SelectedItemProperty,e)}finally{this._AllowWrite=!1}}})}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){function n(e,t,n,r,i,a){var s={Value:0},l={Value:0};o.GetTopAndBottom(t,n,s,l);var u=0;return e?(u=i-l.Value,i-s.Value):(u=s.Value-r,l.Value-r)}var o=t.Internal.ScrollEx,r=function(o){function r(){o.call(this),this.Collapsed=new e.RoutedEvent,this.Expanded=new e.RoutedEvent,this.Selected=new e.RoutedEvent,this.Unselected=new e.RoutedEvent,this._AllowWrite=!1,this._MultiClick=new t.Internal.MultiClickHelper,this._IsPressed=!1,this.DefaultStyleKey=r}return __extends(r,o),r.prototype.$SetHasItems=function(e){try{this._AllowWrite=!0,this.SetCurrentValue(r.HasItemsProperty,e)}finally{this._AllowWrite=!1}},r.prototype.$SetIsSelectionActive=function(e){try{this._AllowWrite=!0,this.SetCurrentValue(r.IsSelectionActiveProperty,e===!0)}finally{this._AllowWrite=!1}},r.prototype.OnHasItemsChanged=function(e){if(this.IgnorePropertyChange)this.IgnorePropertyChange=!1;else{if(!this._AllowWrite)throw this.IgnorePropertyChange=!0,this.SetCurrentValue(r.HasItemsProperty,e.OldValue),new InvalidOperationException("Cannot set read-only property HasItems.");this.UpdateVisualState()}},r.prototype.OnIsExpandedPropertyChanged=function(t){var n=t.NewValue===!0;if(n?this.OnExpanded(new e.RoutedEventArgs):this.OnCollapsed(new e.RoutedEventArgs),n){if(null!=this.ExpansionStateGroup||!this.UserInitiatedExpansion)return;this.UserInitiatedExpansion=!1;var o=this.ParentTreeView;if(!o)return;o.ItemsControlHelper.ScrollIntoView(this)}else{if(!this.ContainsSelection)return;this.Focus()}},r.prototype.OnIsSelectedChanged=function(t){this.IgnorePropertyChange?this.IgnorePropertyChange=!1:t.NewValue===!0?(this.Select(!0),this.OnSelected(new e.RoutedEventArgs)):(this.Select(!1),this.OnUnselected(new e.RoutedEventArgs))},r.prototype.OnIsSelectionActiveChanged=function(e){if(this.IgnorePropertyChange)this.IgnorePropertyChange=!1;else{if(!this._AllowWrite)throw this.IgnorePropertyChange=!0,this.SetValueInternal(r.IsSelectionActiveProperty,e.OldValue),new InvalidOperationException("Cannot set read-only property IsSelectionActive.");this.UpdateVisualState()}},Object.defineProperty(r.prototype,"ExpanderButton",{get:function(){return this._expanderButton},set:function(e){this._expanderButton&&(this._expanderButton.Click.off(this.OnExpanderClick,this),this._expanderButton.GotFocus.off(this.OnExpanderGotFocus,this)),this._expanderButton=e,this._expanderButton&&(this._expanderButton.IsChecked=this.IsExpanded,this._expanderButton.Click.on(this.OnExpanderClick,this),this._expanderButton.GotFocus.on(this.OnExpanderGotFocus,this))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"HeaderElement",{get:function(){return this._headerElement},set:function(e){this._headerElement&&this._headerElement.MouseLeftButtonDown.off(this.OnHeaderMouseLeftButtonDown,this),this._headerElement=e,this._headerElement&&this._headerElement.MouseLeftButtonDown.on(this.OnHeaderMouseLeftButtonDown,this)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"ExpansionStateGroup",{get:function(){return this._expansionStateGroup},set:function(e){this._expansionStateGroup&&this._expansionStateGroup.CurrentStateChanged.off(this.OnExpansionStateGroupStateChanged,this),this._expansionStateGroup=e,this._expansionStateGroup&&this._expansionStateGroup.CurrentStateChanged.on(this.OnExpansionStateGroupStateChanged,this)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"ParentItemsControl",{get:function(){return this._parentItemsControl},set:function(e){if(this._parentItemsControl!=e){this._parentItemsControl=e;var t=this.ParentTreeView;null!=t&&(this.RequiresContainsSelectionUpdate&&(this.RequiresContainsSelectionUpdate=!1,this.UpdateContainsSelection(!0)),t.CheckForSelectedDescendents(this))}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"ParentTreeViewItem",{get:function(){var e=this.ParentItemsControl;return e instanceof r?e:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"ParentTreeView",{get:function(){for(var e=this;null!=e;e=e.ParentTreeViewItem){var n=e.ParentItemsControl;if(n instanceof t.TreeView)return n}return null},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"IsRoot",{get:function(){return this.ParentItemsControl instanceof t.TreeView},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"CanExpandOnInput",{get:function(){return this.HasItems&&this.IsEnabled},enumerable:!0,configurable:!0}),r.prototype.OnApplyTemplate=function(){o.prototype.OnApplyTemplate.call(this),this.ExpanderButton=this.GetTemplateChild("ExpanderButton",t.Primitives.ToggleButton),this.HeaderElement=this.GetTemplateChild("Header",e.FrameworkElement),this.ExpansionStateGroup=e.Media.VSM.VisualStateManager.GetGroup(this,"ExpansionStates"),this.UpdateVisualState(!1)},r.prototype.OnExpansionStateGroupStateChanged=function(e,t){t.NewState.Name&&"expanded"===t.NewState.Name.toLowerCase()&&this.BringIntoView()},r.prototype.BringIntoView=function(){var e=this;if(this.UserInitiatedExpansion){this.UserInitiatedExpansion=!1;var t=this.ParentTreeView;t&&setTimeout(function(){t.ItemsControlHelper.ScrollIntoView(e)},1)}},r.prototype.GoToStates=function(e){o.prototype.GoToStates.call(this,e),this.GoToStateExpansion(e),this.GoToStateHasItems(e),this.GoToStateSelection(e)},r.prototype.GoToStateCommon=function(e){return e(this.IsEnabled?this._IsPressed?"Pressed":this.IsMouseOver?"MouseOver":"Normal":"Disabled")},r.prototype.GoToStateExpansion=function(e){return e(this.IsExpanded?"Expanded":"Collapsed")},r.prototype.GoToStateHasItems=function(e){return e(this.HasItems?"HasItems":"NoItems")},r.prototype.GoToStateSelection=function(e){return e(this.IsSelected?this.IsSelectionActive?"Selected":"SelectedInactive":"Unselected")},r.prototype.GetContainerForItem=function(){return new r},r.prototype.IsItemItsOwnContainer=function(e){return e instanceof r},r.prototype.PrepareContainerForItem=function(e,t){var n=e;n instanceof r&&(n.ParentItemsControl=this),o.prototype.PrepareContainerForItem.call(this,e,t)},r.prototype.ClearContainerForItem=function(e,t){var n=e;n instanceof r&&(n.ParentItemsControl=null),o.prototype.ClearContainerForItem.call(this,e,t)},r.prototype.OnItemsChanged=function(t){if(o.prototype.OnItemsChanged.call(this,t),this.$SetHasItems(this.Items.Count>0),null!=t.NewItems)for(var n=0,r=t.NewItems,i=r.length;i>n;n++)r[n].ParentItemsControl=this;switch(t.Action){case e.Collections.CollectionChangedAction.Remove:case e.Collections.CollectionChangedAction.Reset:if(this.ContainsSelection){var a=this.ParentTreeView;null==a||a.IsSelectedContainerHookedUp||(this.ContainsSelection=!1,this.Select(!0))}break;case e.Collections.CollectionChangedAction.Replace:if(this.ContainsSelection){var a=this.ParentTreeView;if(null!=a){var s=a.SelectedItem;null==s||null!=t.OldItems&&!nullstone.equals(s,t.OldItems[0])||a.ChangeSelection(s,a.SelectedContainer,!1)}}}if(null!=t.OldItems)for(var n=0,r=t.OldItems,i=r.length;i>n;n++)r[n].ParentItemsControl=null},r.prototype.OnExpanded=function(e){this.ToggleExpanded(),this.Expanded.raise(this,e)},r.prototype.OnCollapsed=function(e){this.ToggleExpanded(),this.Collapsed.raise(this,e)},r.prototype.ToggleExpanded=function(){var e=this.ExpanderButton;e&&(e.IsChecked=this.IsExpanded,this.UpdateVisualState())},r.prototype.OnSelected=function(e){this.UpdateVisualState(),this.Selected.raise(this,e)},r.prototype.OnUnselected=function(e){this.UpdateVisualState(),this.Unselected.raise(this,e)},r.prototype.OnGotFocus=function(e){o.prototype.OnGotFocus.call(this,e);var t=this.ParentTreeViewItem;t&&(t.CancelGotFocusBubble=!0);try{if(!this.IsEnabled||this.CancelGotFocusBubble)return;this.Select(!0),this.$SetIsSelectionActive(!0),this.UpdateVisualState()}finally{this.CancelGotFocusBubble=!1}},r.prototype.OnLostFocus=function(e){o.prototype.OnLostFocus.call(this,e),this.$SetIsSelectionActive(!1),this.UpdateVisualState()},r.prototype.OnExpanderGotFocus=function(e,t){this.CancelGotFocusBubble=!0,this.$SetIsSelectionActive(!0),this.UpdateVisualState(!0)},r.prototype.OnMouseEnter=function(e){o.prototype.OnMouseEnter.call(this,e),this.UpdateVisualState()},r.prototype.OnMouseLeave=function(e){o.prototype.OnMouseLeave.call(this,e),this.UpdateVisualState()},r.prototype.OnHeaderMouseLeftButtonDown=function(e,t){if(this._MultiClick.OnMouseLeftButtonDown(this,t),!t.Handled&&this.IsEnabled&&(this.Focus()&&(t.Handled=!0),this._MultiClick.ClickCount%2===0)){var n=this.IsExpanded;this.UserInitiatedExpansion=this.UserInitiatedExpansion||!n,this.IsExpanded=!n,t.Handled=!0}this.OnMouseLeftButtonDown(t),this.UpdateVisualState()},r.prototype.OnExpanderClick=function(e,t){var n=this.IsExpanded;this.UserInitiatedExpansion=this.UserInitiatedExpansion||!n,this.IsExpanded=!n},r.prototype.OnMouseLeftButtonDown=function(e){o.prototype.OnMouseLeftButtonDown.call(this,e);var t;!e.Handled&&null!=(t=this.ParentTreeView)&&t.HandleMouseButtonDown()&&(e.Handled=!0),this._IsPressed=!0,this.UpdateVisualState()},r.prototype.OnMouseLeftButtonUp=function(e){o.prototype.OnMouseLeftButtonUp.call(this,e),this._IsPressed=!1,this.UpdateVisualState()},r.prototype.OnIsEnabledChanged=function(e){o.prototype.OnIsEnabledChanged.call(this,e),e.NewValue||(this._IsPressed=!1)},r.prototype.OnKeyDown=function(t){if(o.prototype.OnKeyDown.call(this,t),this.IsEnabled){if(t.Handled)return;var n=this.FlowDirection===e.FlowDirection.RightToLeft;switch(t.Key){case e.Input.Key.Left:!e.Input.Keyboard.HasControl()&&(n?this.HandleRightKey():this.HandleLeftKey())&&(t.Handled=!0);break;case e.Input.Key.Up:!e.Input.Keyboard.HasControl()&&this.HandleUpKey()&&(t.Handled=!0);break;case e.Input.Key.Right:!e.Input.Keyboard.HasControl()&&(n?this.HandleLeftKey():this.HandleRightKey())&&(t.Handled=!0);break;case e.Input.Key.Down:!e.Input.Keyboard.HasControl()&&this.HandleDownKey()&&(t.Handled=!0);break;case e.Input.Key.Add:this.CanExpandOnInput&&!this.IsExpanded&&(this.UserInitiatedExpansion=!0,this.IsExpanded=!0,t.Handled=!0);break;case e.Input.Key.Subtract:this.CanExpandOnInput&&this.IsExpanded&&(this.IsExpanded=!1,t.Handled=!0)}}if(this.IsRoot){var r=this.ParentTreeView;r&&r.PropagateKeyDown(t)}},r.prototype.HandleRightKey=function(){return this.CanExpandOnInput?this.IsExpanded?this.HandleDownKey():(this.UserInitiatedExpansion=!0,this.IsExpanded=!0,!0):!1},r.prototype.HandleLeftKey=function(){return this.CanExpandOnInput&&this.IsExpanded?(this.IsFocused?this.Focus():this.IsExpanded=!1,!0):!1},r.prototype.HandleDownKey=function(){return this.AllowKeyHandleEvent()&&this.FocusDown()},r.prototype.HandleUpKey=function(){if(!this.AllowKeyHandleEvent())return!1;var e=this.FindPreviousFocusableItem();return e?e!=this.ParentItemsControl||e!=this.ParentTreeView?e.Focus():!0:!1},r.prototype.HandleScrollByPage=function(e,t,o,i,a,s){var l={Value:0};if(s.Value=n(e,this,t,i,a,l),NumberEx.IsGreaterThanClose(l.Value,o)||NumberEx.IsLessThanClose(s.Value,o))return!1;var u=!1,c=this.HeaderElement;null!=c&&NumberEx.IsLessThanClose(n(e,c,t,i,a,{Value:0}),o)&&(u=!0);for(var p=null,h=this.Items.Count,d=e&&this.ContainsSelection,m=e?h-1:0;m>=0&&h>m;){var y=this.ItemContainersManager.ContainerFromIndex(m);if(y instanceof r&&y.IsEnabled){if(d){if(y.IsSelected){d=!1,m+=e?-1:1;continue}if(!y.ContainsSelection){m+=e?-1:1;continue}d=!1}var f={Value:0};if(y.HandleScrollByPage(e,t,o,i,a,f))return!0;if(NumberEx.IsGreaterThanClose(f.Value,o))break;p=y}m+=e?-1:1}return null!=p?e?p.Focus():p.FocusInto():u?this.Focus():!1},r.prototype.Select=function(e){var t=this.ParentTreeView;if(t&&!t.IsSelectionChangeActive){var n=this.ParentTreeViewItem,o=null!=n?n.ItemContainersManager.ItemFromContainer(this):t.ItemContainersManager.ItemFromContainer(this);t.ChangeSelection(o,this,e)}},r.prototype.UpdateContainsSelection=function(e){for(var t=this.ParentTreeViewItem;null!=t;t=t.ParentTreeViewItem)t.ContainsSelection=e},r.prototype.AllowKeyHandleEvent=function(){return this.IsSelected},r.prototype.FocusDown=function(){var e=this.FindNextFocusableItem(!0);return e&&e.Focus()},r.prototype.FocusInto=function(){var e=this.FindLastFocusableItem();return e&&e.Focus()},r.prototype.FindNextFocusableItem=function(e){if(e&&this.IsExpanded&&this.HasItems){var t=this.ItemContainersManager.ContainerFromIndex(0);if(t instanceof r)return t.IsEnabled?t:t.FindNextFocusableItem(!1)}var n=this.ParentItemsControl;if(null!=n){for(var o=n.ItemContainersManager.IndexFromContainer(this),i=n.Items.Count;o++<i;){var t=n.ItemContainersManager.ContainerFromIndex(o);if(t instanceof r&&t.IsEnabled)return t}var a=this.ParentTreeViewItem;if(a instanceof r)return a.FindNextFocusableItem(!1)}return null},r.prototype.FindLastFocusableItem=function(){for(var e=this,t=null,n=-1;e instanceof r;e=t.ItemContainersManager.ContainerFromIndex(n))if(e.IsEnabled){if(!e.IsExpanded||!e.HasItems)return e;t=e,n=e.Items.Count-1}else{if(!(n>0))break;--n}return t},r.prototype.FindPreviousFocusableItem=function(){var e=this.ParentItemsControl;if(!e)return null;for(var t=e.ItemContainersManager.IndexFromContainer(this);t-->0;){var n=e.ItemContainersManager.ContainerFromIndex(t);if(n instanceof r&&n.IsEnabled){var o=n.FindLastFocusableItem();if(null!=o)return o}}return e},r.HasItemsProperty=DependencyProperty.RegisterReadOnly("HasItems",function(){return Boolean},r,!1,function(e,t){return e.OnHasItemsChanged(t)}),r.IsExpandedProperty=DependencyProperty.Register("IsExpanded",function(){return Boolean},r,!1,function(e,t){return e.OnIsExpandedPropertyChanged(t)}),r.IsSelectedProperty=DependencyProperty.Register("IsSelected",function(){return Boolean},r,!1,function(e,t){return e.OnIsSelectedChanged(t)}),r.IsSelectionActiveProperty=DependencyProperty.RegisterReadOnly("IsSelectionActive",function(){return Boolean},r,!1,function(e,t){return e.OnIsSelectionActiveChanged(t)}),r}(t.HeaderedItemsControl);t.TreeViewItem=r,t.TemplateVisualStates(r,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"MouseOver"},{GroupName:"CommonStates",Name:"Pressed"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"FocusStates",Name:"Unfocused"},{GroupName:"FocusStates",Name:"Focused"},{GroupName:"ExpansionStates",Name:"Collapsed"},{GroupName:"ExpansionStates",Name:"Expanded"},{GroupName:"HasItemsStates",Name:"HasItems"},{GroupName:"HasItemsStates",Name:"NoItems"},{GroupName:"SelectionStates",Name:"Unselected"},{GroupName:"SelectionStates",Name:"Selected"},{GroupName:"SelectionStates",Name:"SelectedInactive"}),t.TemplateParts(r,{Name:"Header",Type:e.FrameworkElement},{Name:"ExpanderButton",Type:t.Primitives.ToggleButton})}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=function(e){function t(t,n){e.call(this),this.Handled=!1,Object.defineProperty(this,"Text",{value:t,writable:!1}),Object.defineProperty(this,"Error",{value:n,writable:!1})}return __extends(t,e),t}(e.RoutedEventArgs);t.UpDownParseErrorEventArgs=n}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=function(e){function t(t){e.call(this),this.Value=null,this.Handled=!1,Object.defineProperty(this,"Text",{value:t,writable:!1})}return __extends(t,e),t}(e.RoutedEventArgs);t.UpDownParsingEventArgs=n}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=function(n){function o(){n.call(this),this.DefaultStyleKey=o}return __extends(o,n),o.prototype.PrepareContainerForItem=function(t,o){n.prototype.PrepareContainerForItem.call(this,t,o),t instanceof e.FrameworkElement&&t.TemplateApplied.on(this.BindContainerToCanvas,this)},o.prototype.ClearContainerForItem=function(o,r){n.prototype.ClearContainerForItem.call(this,o,r),o instanceof e.FrameworkElement&&o.TemplateApplied.off(this.BindContainerToCanvas,this),o.ClearValue(t.Canvas.LeftProperty),o.ClearValue(t.Canvas.TopProperty)},o.prototype.BindContainerToCanvas=function(n,o){if(n.TemplateApplied.off(this.BindContainerToCanvas,this),!(e.VisualTreeHelper.GetChildrenCount(n)<1)){var r=e.VisualTreeHelper.GetChild(n,0);n.SetBinding(t.Canvas.LeftProperty,e.Data.Binding.fromData({Source:r,Path:"(Canvas.Left)"})),n.SetBinding(t.Canvas.TopProperty,e.Data.Binding.fromData({Source:r,Path:"(Canvas.Top)"}))}},o}(t.ItemsControl);t.CanvasItemsControl=n}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(e){var t=function(){function e(e){this.mousePosition=new Point,this.$$rootVisual=null,e.LayoutUpdated.on(this._HandleLayoutUpdated,this)}return Object.defineProperty(e.prototype,"rootVisual",{get:function(){return this.$$rootVisual},set:function(e){this.$$rootVisual&&(this.$$rootVisual.MouseMove.off(this._HandleRootVisualMouseMove,this),this.$$rootVisual.SizeChanged.off(this._HandleSizeChanged,this)),this.$$rootVisual=e,e&&(e.MouseMove.on(this._HandleRootVisualMouseMove,this),e.SizeChanged.on(this._HandleSizeChanged,this))},enumerable:!0,configurable:!0}),e.prototype.tryInit=function(e){if(e){var t=e.XamlNode.LayoutUpdater.tree.surface;t&&(this.rootVisual=t.App.RootVisual)}},e.prototype.setOnSizeChanged=function(e){this.$$onSizeChanged=e},e.prototype.getAvailableSize=function(){return new minerva.Size(this.rootVisual.ActualWidth,this.rootVisual.ActualHeight)},e.prototype._HandleLayoutUpdated=function(e,t){if(!this.rootVisual){var n=e.XamlNode.LayoutUpdater.tree.surface;n&&(this.rootVisual=n.App.RootVisual)}this.rootVisual&&e.LayoutUpdated.off(this._HandleLayoutUpdated,this)},e.prototype._HandleRootVisualMouseMove=function(e,t){this.mousePosition=t.GetPosition(null)},e.prototype._HandleSizeChanged=function(e,t){this.$$onSizeChanged&&this.$$onSizeChanged(t.NewSize)},e}();e.RootVisualTracker=t}(t=e.contextmenu||(e.contextmenu={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(t){var n=function(t){function n(e){t.call(this),this._ValueBinding=null,this._ValueBinding=e}return __extends(n,t),Object.defineProperty(n.prototype,"ValueBinding",{get:function(){return this._ValueBinding},enumerable:!0,configurable:!0}),n.prototype.GetDynamicValue=function(t){var o=this._ValueBinding,r=new e.Data.Binding;r.BindsDirectlyToSource=o.BindsDirectlyToSource,r.Converter=o.Converter,r.ConverterCulture=o.ConverterCulture,r.ConverterParameter=o.ConverterParameter,r.FallbackValue=o.FallbackValue,r.Mode=o.Mode,r.NotifyOnValidationError=o.NotifyOnValidationError,r.Path=o.Path,r.StringFormat=o.StringFormat,r.TargetNullValue=o.TargetNullValue,r.UpdateSourceTrigger=o.UpdateSourceTrigger,r.ValidatesOnDataErrors=o.ValidatesOnDataErrors,r.ValidatesOnExceptions=o.ValidatesOnExceptions,r.ValidatesOnNotifyDataErrors=o.ValidatesOnNotifyDataErrors,r.Source=t,this.SetBinding(n.ValueProperty,r);var i=this.Value;return this.ClearValue(n.ValueProperty),i},n.ValueProperty=DependencyProperty.Register("Value",function(){return Object},n),n}(e.FrameworkElement);t.BindingSourceEvaluator=n}(n=t.Internal||(t.Internal={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(n){var o=function(){function n(e,t,n){this.Owner=e,this.OnCoerceValue=t,this.OnCoerceCurrentIndex=n,this.TextBox=null,this.Text="",this.IsCoercing=!1,this._IsEditing=!1,this._IsInvalidInput=!1,this.Owner.KeyDown.on(this.OnKeyDown,this)}return Object.defineProperty(n.prototype,"IsEditing",{get:function(){return this._IsEditing},set:function(e){e!==this._IsEditing&&(this._IsEditing=e,this.OnIsEditingChanged(e))},enumerable:!0,configurable:!0}),n.prototype.OnIsEditingChanged=function(e){this.Owner.OnIsEditingChanged(e),this.TextBox&&(e?(this.TextBox.IsFocused&&this.TextBox.Select(0,this.TextBox.Text.length),this.TextBox.IsHitTestVisible=!0):(this.TextBox.Text=this.Owner.FormatValue(),this.TextBox.IsHitTestVisible=!1))},Object.defineProperty(n.prototype,"IsInvalidInput",{get:function(){return this._IsInvalidInput},set:function(e){e!==this._IsInvalidInput&&(this._IsInvalidInput=e,this.Owner.OnIsInvalidInputChanged(e))},enumerable:!0,configurable:!0
}),n.prototype.Attach=function(e){this.TextBox=e,e&&(e.GotFocus.on(this.TextBox_GotFocus,this),e.LostFocus.on(this.TextBox_LostFocus,this)),this.UpdateTextBoxText(),this.UpdateIsEditable()},n.prototype.Detach=function(){this.TextBox&&(this.TextBox.GotFocus.off(this.TextBox_GotFocus,this),this.TextBox.LostFocus.off(this.TextBox_LostFocus,this)),this.TextBox=null},n.prototype.OnKeyDown=function(t,n){if(null==n||n.Key!==e.Input.Key.Enter&&n.Key!==e.Input.Key.Space||this.IsEditing||!this.Owner.IsEditable){if(null==n||n.Handled)return;n.Key===e.Input.Key.Escape?(this.IsInvalidInput=!1,this.IsEditing=!1,n.Handled=!0):!this.IsEditing&&this.Owner.IsEditable&&(this.IsEditing=!0)}else this.IsEditing=!0,n.Handled=!0},n.prototype.EscapeFocus=function(){var e=this;this.IsInvalidInput?this.Owner.InvalidInputAction===t.InvalidInputAction.TextBoxCannotLoseFocus&&this.TextBox.IsFocused&&window.setTimeout(function(){return e.TextBox.Focus()},1):this.IsEditing=!1},n.prototype.OnValueChanged=function(e,t){if(!this.IsCoercing){var n=this.Owner.Items.IndexOf(t);n>-1&&(this.IsCoercing=!0,this.OnCoerceCurrentIndex(n),this.IsCoercing=!1)}this.UpdateTextBoxText(),this.Owner.OnValueChanged(e,t)},n.prototype.OnCurrentIndexChanged=function(e,t){this.IsCoercing||t>=0&&t<this.Owner.Items.Count&&(this.IsCoercing=!0,this.OnCoerceValue(this.Owner.Items.GetValueAt(t)),this.IsCoercing=!1),this.IsEditing=!1,this.Owner.OnCurrentIndexChanged(e,t)},n.prototype.TextBox_LostFocus=function(e,t){this.ProcessUserInput()},n.prototype.TextBox_GotFocus=function(e,t){this.SelectAllText()},n.prototype.SelectAllText=function(){this.TextBox&&this.TextBox.SelectAll()},n.prototype.UpdateTextBoxText=function(){this.TextBox&&(this.Text=this.Owner.FormatValue()||"",this.TextBox.Text=this.Text,this.TextBox.SelectionStart=this.Text.length)},n.prototype.UpdateIsEditable=function(){this.TextBox&&(this.TextBox.IsReadOnly=!this.Owner.IsEditable)},n.prototype.ProcessUserInput=function(){if(this.TextBox&&this.Text!==this.TextBox.Text){var e=this.TextBox.SelectionStart;this.Text=this.TextBox.Text,this.ApplyValue(this.Text),e<this.TextBox.Text.length&&(this.TextBox.SelectionStart=e)}},n.prototype.OnParseError=function(e){this.Owner.ParseError.raise(this,e)},n.prototype.ApplyValue=function(e){if(this.Owner.IsEditable){this.IsEditing=!0;try{var n={Value:null};this.IsInvalidInput=!this.Owner.TryParseValue(e,n),this.OnCoerceValue(n.Value)}catch(o){var r=new t.UpDownParseErrorEventArgs(e,o);this.OnParseError(r),r.Handled||this.UpdateTextBoxText()}finally{this.IsInvalidInput||(this.IsEditing=!1)}}},n}();n.DomainCoercer=o}(n=t.Internal||(t.Internal={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.Attach=function(e,t){var n=this;this._Callback=t,e.on(this._OnEvent,this),this.Detach=function(){e.off(n._OnEvent,n),n.Detach=function(){}}},e.prototype.Detach=function(){},e.prototype._OnEvent=function(e,t){this._Callback&&this._Callback(e,t)},e}();e.EventGesture=t}(t=e.Internal||(e.Internal={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(e){var t=function(e){function t(t,n,o,r){e.call(this,t,n,o),this.OnCoerceFormat=r}return __extends(t,e),t.prototype.OnDecimalPlacesChanged=function(e,t){this.CoerceDepth++,this.OnCoerceFormat(),this.CoerceDepth--},t.prototype.AddToValue=function(e){this.OnCoerceValue(this.Value+e),this.RequestedVal=this.Value},t}(e.RangeCoercer);e.FormattedRangeCoercer=t}(t=e.Internal||(e.Internal={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(n){function o(e){if(e instanceof c){var t=e,n={};return Object.defineProperty(n,"ActualSize",{get:function(){return t.ActualHeight}}),Object.defineProperty(n,"MaxSize",{get:function(){return t.MaxHeight||0}}),Object.defineProperty(n,"MinSize",{get:function(){return t.MinHeight||0}}),Object.defineProperty(n,"Size",{get:function(){return t.Height},set:function(e){t.Height=e}}),Object.defineProperty(n,"IsStar",{get:function(){return!!t.Height&&t.Height.Type===r.Star}}),n.Index=0,n.OrigActualSize=t.ActualHeight,n}if(e instanceof p){var o=e,n={};return Object.defineProperty(n,"ActualSize",{get:function(){return o.ActualWidth}}),Object.defineProperty(n,"MaxSize",{get:function(){return o.MaxWidth||0}}),Object.defineProperty(n,"MinSize",{get:function(){return o.MinWidth||0}}),Object.defineProperty(n,"Size",{get:function(){return o.Width},set:function(e){o.Width=e}}),Object.defineProperty(n,"IsStar",{get:function(){return!!o.Width&&o.Width.Type===r.Star}}),n.Index=0,n.OrigActualSize=o.ActualWidth,n}}var r=minerva.controls.grid.GridUnitType;!function(e){e[e.Auto=0]="Auto",e[e.Columns=1]="Columns",e[e.Rows=2]="Rows"}(n.GridResizeDirection||(n.GridResizeDirection={}));var i=n.GridResizeDirection;!function(e){e[e.BasedOnAlignment=0]="BasedOnAlignment",e[e.CurrentAndNext=1]="CurrentAndNext",e[e.PreviousAndCurrent=2]="PreviousAndCurrent",e[e.PreviousAndNext=3]="PreviousAndNext"}(n.GridResizeBehavior||(n.GridResizeBehavior={}));var a=n.GridResizeBehavior;!function(e){e[e.Split=0]="Split",e[e.ResizeDefinition1=1]="ResizeDefinition1",e[e.ResizeDefinition2=2]="ResizeDefinition2"}(n.SplitBehavior||(n.SplitBehavior={}));var s=n.SplitBehavior,l=function(){function n(e){this.UpdateResizeDirection(e),this.Behavior=u[this.Direction!==i.Columns?e.VerticalAlignment:e.HorizontalAlignment]||a.PreviousAndNext,this.SplitterLength=Math.min(e.ActualWidth,e.ActualHeight)}return n.prototype.Setup=function(e,n){var r=this.Direction===i.Columns,a=r?t.Grid.GetColumnSpan(e):t.Grid.GetRowSpan(e);if(a>1)return!1;var l=r?t.Grid.GetColumn(e):t.Grid.GetRow(e),u=this.GetBehaviorIndices(l),c=r?n.ColumnDefinitions:n.RowDefinitions;return u[0]<0||u[1]>=c.Count?!1:(this.SplitterIndex=l,this.DS1=o(c.GetValueAt(u[0])),this.DS1.Index=u[0],this.DS2=o(c.GetValueAt(u[1])),this.DS2.Index=u[1],this.SplitBehavior=this.DS1.IsStar&&this.DS2.IsStar?s.Split:this.DS1.IsStar?s.ResizeDefinition2:s.ResizeDefinition1,!0)},n.prototype.Move=function(e,t,n){var o=this.DS1,r=this.DS2;if(!o||!r)return!0;if(this.SplitBehavior===s.Split&&!NumberEx.AreClose(o.ActualSize+r.ActualSize,o.OrigActualSize+r.OrigActualSize))return!1;var a=this.GetConstraints(),l=a[0],u=a[1],c=this.Direction===i.Columns?t:n;return c=Math.min(Math.max(c,l),u),this.SetLengths(e,o.ActualSize+c,r.ActualSize-c),!0},n.prototype.UpdateResizeDirection=function(t){var n=this.Direction;return t.HorizontalAlignment!==e.HorizontalAlignment.Stretch?this.Direction=i.Columns:t.VerticalAlignment===e.VerticalAlignment.Stretch&&t.ActualWidth<=t.ActualHeight?this.Direction=i.Columns:this.Direction=i.Rows,n!==this.Direction},n.prototype.SetLengths=function(e,n,a){if(this.SplitBehavior!==s.Split)return void(this.SplitBehavior===s.ResizeDefinition1?this.DS1.Size=new t.GridLength(n,r.Pixel):this.DS2.Size=new t.GridLength(a,r.Pixel));for(var l=this.Direction===i.Columns?e.ColumnDefinitions.getEnumerator():e.RowDefinitions.getEnumerator(),u=0;l.moveNext();){var c=o(l.current);this.DS1.Index===u?c.Size=new t.GridLength(n,r.Star):this.DS2.Index===u?c.Size=new t.GridLength(a,r.Star):c.IsStar&&(c.Size=new t.GridLength(c.ActualSize,r.Star)),u++}},n.prototype.GetConstraints=function(){var e=this.DS1.ActualSize,t=this.DS1.MinSize,n=this.DS1.MaxSize,o=this.DS2.ActualSize,r=this.DS2.MinSize,i=this.DS2.MaxSize;return this.SplitterIndex===this.DS1.Index?t=Math.max(t,this.SplitterLength):this.SplitterIndex===this.DS2.Index&&(r=Math.max(r,this.SplitterLength)),this.SplitBehavior===s.Split?[-Math.min(e-t,i-o),Math.min(n-e,o-r)]:this.SplitBehavior!==s.ResizeDefinition1?[o-i,o-r]:[t-e,n-e]},n.prototype.GetBehaviorIndices=function(e){switch(this.Behavior){case a.CurrentAndNext:return[e,e+1];case a.PreviousAndCurrent:return[e-1,e];default:return[e-1,e+1]}},n}();n.GridSplitterResizer=l;var u=[];u[e.VerticalAlignment.Top]=a.PreviousAndCurrent,u[e.VerticalAlignment.Bottom]=a.CurrentAndNext,u[e.HorizontalAlignment.Left]=a.PreviousAndCurrent,u[e.HorizontalAlignment.Right]=a.CurrentAndNext;var c=e.Controls.RowDefinition,p=e.Controls.ColumnDefinition}(n=t.Internal||(t.Internal={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(n){var o=function(){function n(e){this.ItemsControl=e}return Object.defineProperty(n.prototype,"ItemsHost",{get:function(){if(!(this._itemsHost instanceof t.Panel)&&null!=this.ItemsControl&&null!=this.ItemsControl.ItemContainersManager){var n=this.ItemsControl.ItemContainersManager.ContainerFromIndex(0);null!=n&&(this._itemsHost=e.VisualTreeHelper.GetParent(n))}return this._itemsHost},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ScrollHost",{get:function(){if(!this._scrollHost){var n=this.ItemsHost;if(null!=n)for(var o=n;o!==this.ItemsControl&&null!=o;o=e.VisualTreeHelper.GetParent(o)){var r=o;if(r instanceof t.ScrollViewer){this._scrollHost=r;break}}}return this._scrollHost},enumerable:!0,configurable:!0}),n.prototype.OnApplyTemplate=function(){this._itemsHost=null,this._scrollHost=null},n.PrepareContainerForItemOverride=function(n,o){if(o){var r=n instanceof t.Control?n:null;r&&null==r.Style&&r.SetValue(e.FrameworkElement.StyleProperty,o)}},n.prototype.UpdateItemContainerStyle=function(e){if(e){var t=this.ItemsHost;if(t&&t.Children)for(var n=t.Children.getEnumerator();n.moveNext();){var o=n.current;o.Style||(o.Style=e)}}},n.prototype.ScrollIntoView=function(e){var t=this.ScrollHost;if(t){var n;try{n=e.TransformToVisual(t)}catch(o){return}var r=n.Transform(new Point),i=n.Transform(new Point(e.ActualWidth,e.ActualHeight)),a=new minerva.Rect(r.x,r.y,i.x,i.y),s=t.VerticalOffset,l=0,u=t.ViewportHeight,c=a.y+a.height;c>u&&(l=c-u,s+=l);var p=a.y;0>p-l&&(s-=l-p),t.ScrollToVerticalOffset(s);var h=t.HorizontalOffset,d=0,m=t.ViewportWidth,y=a.x+a.width;y>m&&(d=y-m,h+=d);var f=a.x;0>f-d&&(h-=d-f),t.ScrollToHorizontalOffset(h)}},n}();n.ItemsControlHelper=o}(n=t.Internal||(t.Internal={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(e){function t(e,t){var n=t.x,o=t.y;return e&&(n-=e.x,o-=e.y),n*n+o*o}var n=function(){function e(){this.ClickCount=0}return e.prototype.OnMouseLeftButtonDown=function(e,n){if(!e.IsEnabled)return void(this.ClickCount=1);var o=(new Date).getTime(),r=o-this.LastClickTime,i=n.GetPosition(e),a=t(this.LastClickPosition,i);500>r&&9>a?this.ClickCount++:this.ClickCount=1,this.LastClickTime=o,this.LastClickPosition=i},e}();e.MultiClickHelper=n}(t=e.Internal||(e.Internal={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(t){var n=function(e){function t(t){if(e.call(this),this.IsReadOnly=!1,t)for(var n=t.getEnumerator();n.moveNext();)this.Add(n.current)}return __extends(t,e),t.prototype.Add=function(t){if(this.IsReadOnly)throw new InvalidOperationException("ObservableObjectCollection is read only.");e.prototype.Add.call(this,t)},t.prototype.AddRange=function(t){if(this.IsReadOnly)throw new InvalidOperationException("ObservableObjectCollection is read only.");e.prototype.AddRange.call(this,t)},t.prototype.Insert=function(t,n){if(this.IsReadOnly)throw new InvalidOperationException("ObservableObjectCollection is read only.");e.prototype.Insert.call(this,t,n)},t.prototype.RemoveAt=function(t){if(this.IsReadOnly)throw new InvalidOperationException("ObservableObjectCollection is read only.");e.prototype.RemoveAt.call(this,t)},t.prototype.SetValueAt=function(t,n){if(this.IsReadOnly)throw new InvalidOperationException("ObservableObjectCollection is read only.");e.prototype.SetValueAt.call(this,t,n)},t.prototype.Clear=function(){if(this.IsReadOnly)throw new InvalidOperationException("ObservableObjectCollection is read only.");e.prototype.Clear.call(this)},t}(e.Collections.ObservableCollection);t.ObservableObjectCollection=n}(n=t.Internal||(t.Internal={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(t){function n(e,t){t+=e.VerticalOffset,t=Math.max(Math.min(t,e.ExtentHeight),0),e.ScrollToVerticalOffset(t)}function o(e,t){t+=e.HorizontalOffset,t=Math.max(Math.min(t,e.ExtentWidth),0),e.ScrollToHorizontalOffset(t)}var r=function(){function t(){}return t.HandleKey=function(n,o,r){if(!n)return!1;var i=r===e.FlowDirection.RightToLeft;switch(o){case e.Input.Key.PageUp:return NumberEx.IsGreaterThanClose(n.ExtentHeight,n.ViewportHeight)?t.PageUp(n):t.PageLeft(n),!0;case e.Input.Key.PageDown:return NumberEx.IsGreaterThanClose(n.ExtentHeight,n.ViewportHeight)?t.PageDown(n):t.PageRight(n),!0;case e.Input.Key.End:return t.ScrollToBottom(n),!0;case e.Input.Key.Home:return t.ScrollToTop(n),!0;case e.Input.Key.Left:return i?t.LineRight(n):t.LineLeft(n),!0;case e.Input.Key.Up:return t.LineUp(n),!0;case e.Input.Key.Right:return i?t.LineLeft(n):t.LineRight(n),!0;case e.Input.Key.Down:return t.LineDown(n),!0}return!1},t.LineUp=function(e){n(e,-16)},t.LineDown=function(e){n(e,16)},t.LineLeft=function(e){o(e,-16)},t.LineRight=function(e){o(e,16)},t.PageUp=function(e){n(e,-e.ViewportHeight)},t.PageDown=function(e){n(e,e.ViewportHeight)},t.PageLeft=function(e){o(e,-e.ViewportWidth)},t.PageRight=function(e){o(e,e.ViewportWidth)},t.ScrollToTop=function(e){e.ScrollToVerticalOffset(0)},t.ScrollToBottom=function(e){e.ScrollToVerticalOffset(e.ExtentHeight)},t.GetTopAndBottom=function(e,t,n,o){var r=e.TransformToVisual(t);n.Value=r.Transform(new Point(0,0)).y,o.Value=r.Transform(new Point(0,e.ActualHeight)).y},t}();t.ScrollEx=r}(n=t.Internal||(t.Internal={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(e){var t=function(){function e(e){var t=this;this._ActiveBox=null,this._IsMouseDown=!1,this._TextBoxes=[],this._TextBoxes=e=e.filter(function(e){return!!e}),e.forEach(function(e){e.MouseLeftButtonDown.on(t._MouseDown,t),e.MouseLeftButtonUp.on(t._MouseUp,t),e.GotFocus.on(t._GotFocus,t),e.LostFocus.on(t._LostFocus,t)})}return Object.defineProperty(e.prototype,"ActiveBox",{get:function(){return this._ActiveBox},enumerable:!0,configurable:!0}),e.prototype.Dispose=function(){var e=this;this._TextBoxes.forEach(function(t){t.MouseLeftButtonDown.off(e._MouseDown,e),t.MouseLeftButtonUp.off(e._MouseUp,e),t.GotFocus.off(e._GotFocus,e),t.LostFocus.off(e._LostFocus,e)})},e.prototype._GotFocus=function(e,t){this._IsMouseDown||e.SelectAll()},e.prototype._MouseDown=function(e,t){this._IsMouseDown=!0},e.prototype._MouseUp=function(e,t){this._IsMouseDown=!1,this._ActiveBox!==e&&(this._ActiveBox=e,this._ActiveBox.SelectionLength<=0&&e.SelectAll())},e.prototype._LostFocus=function(e,t){e.Select(0,0),this._ActiveBox===e&&(this._ActiveBox=null)},e}();e.SelectionHandler=t}(t=e.Internal||(e.Internal={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(n){var o=function(){function n(e,t){this.Owner=e,this.Spinner=t,this.Owner&&(this.Owner.KeyDown.on(this.OnKeyDown,this),this.Owner.MouseWheel.on(this.OnMouseWheel,this)),this.Spinner&&this.Spinner.Spin.on(this.Spinner_Spin,this)}return n.prototype.UpdateValid=function(e,n){var o=t.ValidSpinDirections.None;e&&(o|=t.ValidSpinDirections.Increase),n&&(o|=t.ValidSpinDirections.Decrease),this.Spinner&&(this.Spinner.ValidSpinDirection=o)},n.prototype.Dispose=function(){this.Owner&&(this.Owner.KeyDown.off(this.OnKeyDown,this),this.Owner.MouseWheel.off(this.OnMouseWheel,this)),this.Spinner&&this.Spinner.Spin.on(this.Spinner_Spin,this)},n.prototype.OnKeyDown=function(t,n){if(!n.Handled)switch(n.Key){case e.Input.Key.Enter:this.Owner.OnSpin(),n.Handled=!0;break;case e.Input.Key.Up:this.DoIncrement(),n.Handled=!0;break;case e.Input.Key.Down:this.DoDecrement(),n.Handled=!0}},n.prototype.OnMouseWheel=function(e,t){t.Handled||(t.Delta<0?this.DoDecrement():0<t.Delta&&this.DoIncrement(),t.Handled=!0)},n.prototype.Spinner_Spin=function(e,n){this.Owner.OnSpin(),this.Spinner&&(n.Direction===t.SpinDirection.Increase?this.DoIncrement():this.DoDecrement())},n.prototype.DoIncrement=function(){this.Spinner&&(this.Spinner.ValidSpinDirection&t.ValidSpinDirections.Increase)===t.ValidSpinDirections.Increase&&this.Owner.OnIncrement()},n.prototype.DoDecrement=function(){this.Spinner&&(this.Spinner.ValidSpinDirection&t.ValidSpinDirections.Decrease)===t.ValidSpinDirections.Decrease&&this.Owner.OnDecrement()},n}();n.SpinFlow=o}(n=t.Internal||(t.Internal={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(t){var n=function(){function t(e,t,n){this.Control=e,this.TextBox=t,this.OnCoerceValue=n,this.Text="",this.TextBox&&(this.TextBox.GotFocus.on(this.TextBox_GotFocus,this),this.TextBox.LostFocus.on(this.TextBox_LostFocus,this)),this.UpdateTextBoxText(),this.UpdateIsEditable()}return Object.defineProperty(t.prototype,"Value",{get:function(){return this.Control.Value},enumerable:!0,configurable:!0}),t.prototype.ProcessUserInput=function(){if(this.TextBox&&this.Text!==this.TextBox.Text){var e=this.TextBox.SelectionStart;this.Text=this.TextBox.Text,this.ApplyValue(this.Text),e<this.TextBox.Text.length&&(this.TextBox.SelectionStart=e)}},t.prototype.Dispose=function(){this.TextBox&&(this.TextBox.GotFocus.off(this.TextBox_GotFocus,this),this.TextBox.LostFocus.off(this.TextBox_LostFocus,this))},t.prototype.TextBox_LostFocus=function(e,t){this.ProcessUserInput()},t.prototype.TextBox_GotFocus=function(e,t){this.SelectAllText()},t.prototype.ApplyValue=function(t){var n,o=new e.UpDownParsingEventArgs(t),r=null;try{n=this.Control.ParseValue(t),o.Value=n}catch(i){r=i}try{this.OnParsing(o)}catch(i){}if(null==r){var a=o.Handled?o.Value:n;this.Value;this.Value===a&&this.UpdateTextBoxText(),this.OnCoerceValue(a)}else if(o.Handled)this.Value===o.Value&&this.UpdateTextBoxText(),this.OnCoerceValue(o.Value);else{var s=new e.UpDownParseErrorEventArgs(t,r);this.OnParseError(s),s.Handled||this.UpdateTextBoxText()}},t.prototype.OnParseError=function(e){this.Control.ParseError.raise(this,e)},t.prototype.OnParsing=function(e){this.Control.Parsing.raise(this,e)},t.prototype.SelectAllText=function(){this.TextBox&&this.TextBox.SelectAll()},t.prototype.UpdateTextBoxText=function(){this.TextBox&&(this.Text=this.Control.FormatValue(this.Value)||"",this.TextBox.Text=this.Text,this.TextBox.SelectionStart=this.Text.length)},t.prototype.UpdateIsEditable=function(){this.TextBox&&(this.TextBox.IsReadOnly=!this.Control.IsEditable)},t}();t.TextBoxFormatter=n}(t=e.Internal||(e.Internal={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=e.Controls.Control,o=function(t){function n(){t.call(this),this.scaleTransform=new e.Media.ScaleTransform,this.DefaultStyleKey=n,this.SizeChanged.on(this.Star_SizeChanged,this)}return __extends(n,t),n.prototype.Star_SizeChanged=function(e,t){var n=t.NewSize.width/34,o=t.NewSize.height/34;this.scaleTransform.ScaleX=this.scaleTransform.ScaleY=Math.min(n,o)},n.prototype.OnApplyTemplate=function(){t.prototype.OnApplyTemplate.call(this),this.scaleTransform=this.GetTemplateChild("scaleTransform",e.Media.ScaleTransform)},n.StarFillBrushProperty=DependencyProperty.Register("StarFillBrush",function(){return e.Media.Brush},n,new e.Media.SolidColorBrush(Color.FromRgba(255,255,128,255))),n.HalfFillBrushProperty=DependencyProperty.Register("HalfFillBrush",function(){return e.Media.Brush},n,void 0),n.StrokeThicknessProperty=DependencyProperty.Register("StrokeThickness",function(){return Number},n,2),n.StrokeLineJoinProperty=DependencyProperty.Register("StrokeLineJoin",function(){return e.Shapes.PenLineJoin},n,e.Shapes.PenLineJoin.Round),n}(n);t.Star=o,e.Controls.TemplateParts(o,{Name:"scaleTransform",Type:e.Media.ScaleTransform})}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=e.Controls.Control,o=e.Controls.Grid,r=minerva.controls.grid.GridUnitType,i=e.Media.Brush,a=function(n){function a(){n.call(this),this.stars=[],this.isHovering=!1,this.DefaultStyleKey=a}return __extends(a,n),a.prototype.OnNumberOfStarsChanged=function(e){this.CreateStars(),this.RefreshStarRating()},a.prototype.OnRatingChanged=function(e){this.DrawUnhovered()},a.prototype.OnApplyTemplate=function(){n.prototype.OnApplyTemplate.call(this),this.LayoutRootStarList=this.GetTemplateChild("LayoutRootStarList",o),this.CreateStars()},a.prototype.OnMouseEnter=function(e){n.prototype.OnMouseEnter.call(this,e);var t=e.GetPosition(this.LayoutRootStarList);this.HandleMouseOver(t)},a.prototype.OnMouseMove=function(e){n.prototype.OnMouseMove.call(this,e);var t=e.GetPosition(this.LayoutRootStarList);this.HandleMouseOver(t)},a.prototype.OnMouseLeave=function(e){n.prototype.OnMouseLeave.call(this,e),this.IsHovering=!1},a.prototype.OnMouseLeftButtonDown=function(e){n.prototype.OnMouseLeftButtonDown.call(this,e),this.IsEnabled&&this.SetCurrentValue(a.RatingProperty,this.GetRatingFromPosition(e.GetPosition(this.LayoutRootStarList)))},a.prototype.HandleMouseOver=function(e){this.IsEnabled&&(this.IsHovering=this.IsInBounds(e),this.IsHovering&&this.SetCurrentValue(a.HoverRatingProperty,this.GetRatingFromPosition(e)))},a.prototype.IsInBounds=function(e){if(this.LayoutRootStarList.ColumnDefinitions.Count>0){var t=this.LayoutRootStarList.ColumnDefinitions.GetValueAt(0).ActualWidth*this.NumberOfStars,n=this.LayoutRootStarList.ColumnDefinitions.GetValueAt(0).ActualWidth;return e.y>=0&&e.y<n&&e.x>=0&&e.x<t}return!1},a.prototype.GetRatingFromPosition=function(e){var t=2*this.NumberOfStars,n=this.LayoutRootStarList.ColumnDefinitions.GetValueAt(0).ActualWidth*this.NumberOfStars,o=e.x/n,r=.75+o*t,i=parseInt(r.toString());return 0>i&&(i=0),i>t&&(i=t),i},Object.defineProperty(a.prototype,"IsHovering",{get:function(){return this.isHovering},set:function(e){this.isHovering!=e&&(this.isHovering=e,this.isHovering||this.DrawUnhovered())},enumerable:!0,configurable:!0}),a.prototype.CreateStars=function(){if(void 0!=this.LayoutRootStarList){this.stars=new Array,this.LayoutRootStarList.ColumnDefinitions.Clear(),this.LayoutRootStarList.Children.Clear();for(var n=0;n<this.NumberOfStars;n++){var o=new e.Controls.ColumnDefinition;o.Width=new e.Controls.GridLength(34,r.Star),this.LayoutRootStarList.ColumnDefinitions.Add(o);var i=new t.Star;i.StarFillBrush=this.StarFillBrush,i.Foreground=this.StarOutlineBrush,i.SetValue(e.Controls.Grid.ColumnProperty,n);var a=new e.Data.Binding;a.ElementName="LayoutRootStarList",a.Path=new e.Data.PropertyPath("Parent.StrokeThickness"),i.SetBinding(t.Star.StrokeThicknessProperty,a),i.StrokeThickness=this.StrokeThickness;var s=new e.Data.Binding;s.ElementName="LayoutRootStarList",s.Path=new e.Data.PropertyPath("Parent.StrokeLineJoin"),i.SetBinding(t.Star.StrokeLineJoinProperty,s),i.StrokeLineJoin=this.StrokeLineJoin,this.LayoutRootStarList.Children.Add(i),this.stars.push(i)}this.RefreshStarRating()}},a.prototype.RefreshStarRating=function(){this.isHovering?this.DrawStarRating(this.HoverRating,this.HoverFillBrush,this.HoverOutlineBrush,this.UnselectedHoverFillBrush):this.DrawUnhovered()},a.prototype.DrawUnhovered=function(){this.DrawStarRating(this.Rating,this.StarFillBrush,this.StarOutlineBrush,this.UnselectedStarFillBrush)},a.prototype.DrawStarRating=function(e,t,n,o){for(var r=0;r<this.NumberOfStars;r++)void 0!=this.stars[r]&&(e>=2*(r+1)?(this.stars[r].StarFillBrush=t,this.stars[r].HalfFillBrush=null):e>=1+2*r?(this.stars[r].StarFillBrush=o,this.stars[r].HalfFillBrush=t):(this.stars[r].StarFillBrush=o,this.stars[r].HalfFillBrush=null),this.stars[r].Foreground=n,this.stars[r].StrokeThickness=this.StrokeThickness,this.stars[r].StrokeLineJoin=this.StrokeLineJoin)},a.NumberOfStarsProperty=DependencyProperty.Register("NumberOfStars",function(){return Number},a,5,function(e,t){return e.OnNumberOfStarsChanged(t)}),a.RatingProperty=DependencyProperty.Register("Rating",function(){return Number},a,0,function(e,t){return e.OnRatingChanged(t)}),a.HoverRatingProperty=DependencyProperty.Register("HoverRating",function(){return Number},a,0,function(e,t){return e.RefreshStarRating()}),a.StarFillBrushProperty=DependencyProperty.Register("StarFillBrush",function(){return i},a,void 0,function(e,t){return e.RefreshStarRating()}),a.UnselectedStarFillBrushProperty=DependencyProperty.Register("UnselectedStarFillBrush",function(){return i},a,void 0,function(e,t){return e.RefreshStarRating()}),a.StarOutlineBrushProperty=DependencyProperty.Register("StarOutlineBrush",function(){return i},a,void 0,function(e,t){return e.RefreshStarRating()}),a.HoverFillBrushProperty=DependencyProperty.Register("HoverFillBrush",function(){return i},a,void 0,function(e,t){return e.RefreshStarRating()}),a.UnselectedHoverFillBrushProperty=DependencyProperty.Register("UnselectedHoverFillBrush",function(){return i},a,void 0,function(e,t){return e.RefreshStarRating()}),a.HoverOutlineBrushProperty=DependencyProperty.Register("HoverOutlineBrush",function(){return i},a,void 0,function(e,t){return e.RefreshStarRating()}),a.StrokeThicknessProperty=DependencyProperty.Register("StrokeThickness",function(){return Number},a,2),a.StrokeLineJoinProperty=DependencyProperty.Register("StrokeLineJoin",function(){return e.Shapes.PenLineJoin},a,e.Shapes.PenLineJoin.Round),a}(n);t.StarRating=a,e.Controls.TemplateParts(a,{Name:"LayoutRootStarList",Type:e.Controls.Grid})}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=function(n){function o(){n.apply(this,arguments)}return __extends(o,n),o.prototype.CreateLayoutUpdater=function(){return new t.tabpanel.TabPanelUpdater},Object.defineProperty(o.prototype,"TabAlignment",{get:function(){var n=e.VisualTreeHelper.GetParentOfType(this,t.TabControl);return null!=n?n.TabStripPlacement:t.Dock.Top},enumerable:!0,configurable:!0}),o.setTabAlignment=function(e,t){if(e){var n=e.XamlNode.LayoutUpdater;n.assets.tabAlignment=t}},o}(t.Panel);t.TabPanel=n}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(t){var n=function(n){function o(){n.apply(this,arguments)}return __extends(o,n),o.prototype.init=function(){this.setMeasurePipe(minerva.singleton(t.measure.TabPanelMeasurePipeDef)).setArrangePipe(minerva.singleton(t.arrange.TabPanelArrangePipeDef));var o=this.assets;o.tabAlignment=e.Dock.Top,o.numRows=1,o.numHeaders=0,o.rowHeight=0,n.prototype.init.call(this)},o}(minerva.controls.panel.PanelUpdater);t.TabPanelUpdater=n}(t=e.tabpanel||(e.tabpanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(n){var o,r=minerva.Size,i=minerva.Visibility;!function(n){function o(e){var t=a(e),n=new r;r.copyTo(e.assets.desiredSize,n);var o=e.assets.margin;return n.height=Math.max(0,n.height-o.top-o.bottom),n.width=Math.max(0,n.width-o.left-o.right+t),n}function a(n){var o=n.getAttachedValue("$node"),r=o?o.XObject:null;if(!(r instanceof t.TabItem)||r.IsSelected)return 0;var i=r.GetTemplate(r.IsSelected,r.TabStripPlacement);if(!(i instanceof t.Panel)||i.Children.Count<=0)return 0;var a=i.Children.GetValueAt(0);return a instanceof e.FrameworkElement&&a.Margin?Math.abs(a.Margin.left+a.Margin.right):0}function s(e){for(var t=[],n=e.walk();n.step();){var r=n.current,a=r.assets.visibility===i.Collapsed?0:o(r).width;t.push(a)}return t}function l(e){var n=e.getAttachedValue("$node"),o=n?n.XObject:null;if(o instanceof t.TabItem){var r=o.IsSelected?1:0;o.SetCurrentValue(t.Canvas.ZIndexProperty,r)}}function u(e){var n=e.getAttachedValue("$node"),o=n?n.XObject:null;return o instanceof t.TabItem?o.IsSelected===!0:void 0}function c(e,t,n){var o=0,r=0;if(t.length>0)for(var i=e.walk();i.step();){var a=i.current;if(u(a))return o;o<t.length&&t[o]===r&&++o,++r}return n&&(o=this._NumberOfRows-1),o}function p(e,t,n){for(var o=0,r=n.length,a=this._NumberOfRows-1,s=0,l=0,u=new Array(a),c=new Array(a),p=new Array(this._NumberOfRows),h=p.slice(0),d=p.slice(0),m=p.slice(0),y=0,f=0;r>f;++f)if(s+n[f]>t&&l>0){h[y]=s,p[y]=l;var C=Math.max(0,(t-s)/l);d[y]=C,u[y]=f-1,C>o&&(o=C),++y,s=n[f],l=1}else s+=n[f],0!=n[f]&&++l;if(0===y)return[];h[y]=s,p[y]=l;var S=(t-s)/l;for(d[y]=S,S>o&&(o=S),c=u.slice(0),m=d.slice(0);;){var C=0;do{for(var I=0,v=0,f=0;f<this._NumberOfRows;++f)v<d[f]&&(v=d[f],I=f);if(0==I)break;var f=I,g=f-1,T=u[g],x=n[T];if(h[f]+=x,!(h[f]<=t))break;--u[g],++p[f],h[g]-=x,--p[g],d[g]=(t-h[g])/p[g],d[f]=(t-h[f])/p[f],C=0;for(var P=0;P<this._NumberOfRows;++P)C<d[P]&&(C=d[P])}while(C>=o);o=C,c=u.slice(0),m=d.slice(0)}for(var w=0,O=0,V=e.walk();V.step();){var _=V.current;_.assets.visibility===i.Visible&&(n[O]+=m[w]),a>w&&c[w]==O&&++w,++O}return c}n.getDesiredSizeWithoutMargin=o,n.getHeadersSize=s,n.setTabItemZ=l,n.getActiveRow=c,n.calculateHeaderDistribution=p}(o=n.helpers||(n.helpers={}))}(n=t.tabpanel||(t.tabpanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t=function(){function e(e,t){this.Handled=!1,Object.defineProperties(this,{Item:{value:e,writable:!1},Target:{value:t,writable:!1}})}return e}();e.FocusingInvalidControlEventArgs=t}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=e.Collections.ObservableCollection,o=e.Collections.ReadOnlyObservableCollection,r=function(n){function r(){n.call(this),this._ErrorsListBox=null,this._HeaderContentControl=null,this._ValidationSummaryItemDictionary={},this._Errors=new i,this._DisplayedErrors=new i,this.FocusingInvalidControl=new nullstone.Event,this.SelectionChanged=new nullstone.Event,this.DefaultStyleKey=r,this._Errors.CollectionChanged.on(this.Errors_CollectionChanged,this),this.Loaded.on(this.ValidationSummary_Loaded,this),this.Unloaded.on(this.ValidationSummary_Unloaded,this),this.IsEnabledChanged.on(this.ValidationSummary_IsEnabledChanged,this)}return __extends(r,n),r.GetShowErrorsInSummary=function(e){return e.GetValue(r.ShowErrorsInSummaryProperty)===!0},r.SetShowErrorsInSummary=function(e,t){e.SetValue(r.ShowErrorsInSummaryProperty,t===!0)},r.OnShowErrorsInSummaryChanged=function(t,n){var o=e.VisualTreeHelper.GetRoot(t);o&&r.UpdateDisplayedErrorsOnAllValidationSummaries(o)},r.prototype.OnFilterChanged=function(e,t){this.UpdateDisplayedErrors()},r.prototype.OnHeaderChanged=function(e,t){this.UpdateHeaderText()},r.prototype.OnTargetChanged=function(n,o){null!=this._RegisteredParent&&(this._RegisteredParent.BindingValidationError.off(this.Target_BindingValidationError,this),this._RegisteredParent=null),n instanceof e.FrameworkElement&&n.BindingValidationError.off(this.Target_BindingValidationError,this),o instanceof e.FrameworkElement&&o.BindingValidationError.on(this.Target_BindingValidationError,this),this._Errors.ClearErrors(t.ValidationSummaryItemType.PropertyError),this.UpdateDisplayedErrors()},Object.defineProperty(r.prototype,"Errors",{get:function(){return this._Errors},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"DisplayedErrors",{get:function(){return new o(this._DisplayedErrors)},enumerable:!0,configurable:!0}),r.prototype.OnApplyTemplate=function(){n.prototype.OnApplyTemplate.call(this),null!=this._ErrorsListBox&&(this._ErrorsListBox.MouseLeftButtonUp.off(this.ErrorsListBox_MouseLeftButtonUp,this),this._ErrorsListBox.KeyDown.off(this.ErrorsListBox_KeyDown,this),this._ErrorsListBox.SelectionChanged.off(this.ErrorsListBox_SelectionChanged,this)),this._ErrorsListBox=this.GetTemplateChild("SummaryListBox",t.ListBox),null!=this._ErrorsListBox&&(this._ErrorsListBox.MouseLeftButtonUp.on(this.ErrorsListBox_MouseLeftButtonUp,this),this._ErrorsListBox.KeyDown.on(this.ErrorsListBox_KeyDown,this),this._ErrorsListBox.ItemsSource=this.DisplayedErrors,this._ErrorsListBox.SelectionChanged.on(this.ErrorsListBox_SelectionChanged,this)),this._HeaderContentControl=this.GetTemplateChild("HeaderContentControl",t.ContentControl),this.UpdateDisplayedErrors(),this.UpdateCommon(!1),
this.UpdateValidation(!1)},r.prototype.Errors_CollectionChanged=function(e,t){if(null!=t.OldItems)for(var n=0,o=t.OldItems;n<o.length;n++){var i=o[n];i&&i.PropertyChanged.off(this.ValidationSummaryItem_PropertyChanged,this)}if(null!=t.NewItems)for(var n=0,o=t.NewItems;n<o.length;n++){var i=o[n];i&&i.PropertyChanged.on(this.ValidationSummaryItem_PropertyChanged,this)}this.SetCurrentValue(r.HasErrorsProperty,this._Errors.Count>0),this.UpdateDisplayedErrors()},r.prototype.ErrorsListBox_KeyDown=function(t,n){n.Key===e.Input.Key.Enter&&this.ExecuteClick(t)},r.prototype.ErrorsListBox_MouseLeftButtonUp=function(e,t){this.ExecuteClick(e)},r.prototype.ErrorsListBox_SelectionChanged=function(e,t){this.SelectionChanged.raise(this,t)},r.prototype.ValidationSummary_Loaded=function(t,n){if(!this.Target&&!this._RegisteredParent){var o=e.VisualTreeHelper.GetParent(this);this._RegisteredParent=o instanceof e.FrameworkElement?o:null,null!=this._RegisteredParent&&this._RegisteredParent.BindingValidationError.on(this.Target_BindingValidationError,this)}this.Loaded.off(this.ValidationSummary_Loaded,this)},r.prototype.ValidationSummary_Unloaded=function(e,t){null!=this._RegisteredParent&&this._RegisteredParent.BindingValidationError.off(this.Target_BindingValidationError,this),this.Unloaded.off(this.ValidationSummary_Unloaded,this)},r.prototype.ValidationSummary_IsEnabledChanged=function(e,t){this.UpdateCommon(!0)},r.prototype.ValidationSummaryItem_PropertyChanged=function(e,t){"ItemType"===t.PropertyName&&this.UpdateDisplayedErrors()},r.prototype.UpdateValidation=function(t){var n=this,o=function(o){return e.Media.VSM.VisualStateManager.GoToState(n,o,t)};this._DisplayedErrors.Count>0?(this.SetCurrentValue(r.HasDisplayedErrorsProperty,!0),o("HasErrors")):(this.SetCurrentValue(r.HasDisplayedErrorsProperty,!1),o("Empty"))},r.prototype.UpdateCommon=function(t){var n=this,o=function(o){return e.Media.VSM.VisualStateManager.GoToState(n,o,t)};o(this.IsEnabled?"Normal":"Disabled")},r.prototype.UpdateHeaderText=function(){var e=this._HeaderContentControl;e&&(e.Content=null!=this.Header?this.Header:this.GetHeaderString())},r.prototype.UpdateDisplayedErrors=function(){for(var e=(this.Filter&t.ValidationSummaryFilters.ObjectErrors)!==t.ValidationSummaryFilters.None,n=(this.Filter&t.ValidationSummaryFilters.PropertyErrors)!==t.ValidationSummaryFilters.None,o=[],r=this.Errors.getEnumerator();r.moveNext();){var i=r.current;i&&(e&&i.ItemType===t.ValidationSummaryItemType.ObjectError?o.push(i):n&&i.ItemType===t.ValidationSummaryItemType.PropertyError&&o.push(i))}o.sort(t.compareSummaryItems),this._DisplayedErrors.Clear(),this._DisplayedErrors.AddRange(o),this.UpdateValidation(!0),this.UpdateHeaderText()},r.prototype.Target_BindingValidationError=function(n,o){var i=o.OriginalSource;if(o&&o.Error&&null!=o.Error.ErrorContent&&i instanceof e.FrameworkElement){var a=o.Error.ErrorContent.toString(),s=(i.Name||i._ID.toString())+a,l=this._ValidationSummaryItemDictionary;if(o.Action===e.Validation.ValidationErrorEventAction.Added){if(r.GetShowErrorsInSummary(i)===!1)return;var u=o.Error.PropertyName,c=new t.ValidationSummaryItem(a,u,t.ValidationSummaryItemType.PropertyError,new t.ValidationSummaryItemSource(u,i),null);this._Errors.Add(c),l[s]=c}else o.Action===e.Validation.ValidationErrorEventAction.Removed&&l[s]&&(this._Errors.Remove(l[s]),l[s]=void 0)}},r.prototype.GetHeaderString=function(){var e=this._DisplayedErrors.Count;return 1===e?"1 Error":e.toString()+" Errors"},r.prototype.ExecuteClick=function(e){var n=e;if(n instanceof t.ListBox){var o=n.SelectedItem;if(o instanceof t.ValidationSummaryItem&&this.FocusControlsOnClick){0===o.Sources.Count?this._CurSummItemsSource=null:r.FindMatchingErrorSource(o.Sources,this._CurSummItemsSource)<0&&(this._CurSummItemsSource=o.Sources.GetValueAt(0));var i=new t.FocusingInvalidControlEventArgs(o,this._CurSummItemsSource);if(this.FocusingInvalidControl.raise(this,i),i.Handled||null==i.Target||null==i.Target.Control||i.Target.Control.Focus(),!(o.Sources.Count<=0)){var a=r.FindMatchingErrorSource(o.Sources,i.Target),s=0>a?0:(a+1)%o.Sources.Count;this._CurSummItemsSource=o.Sources.GetValueAt(s)}}}},r.FindMatchingErrorSource=function(e,t){if(!e)return-1;for(var n=0;n<e.Count;n++)if(e.GetValueAt(n).Equals(t))return n;return-1},r.UpdateDisplayedErrorsOnAllValidationSummaries=function(t){if(t)if(t instanceof r)t.UpdateDisplayedErrors();else for(var n=0,o=e.VisualTreeHelper.GetChildrenCount(t);o>n;n++)r.UpdateDisplayedErrorsOnAllValidationSummaries(e.VisualTreeHelper.GetChild(t,n))},r.ShowErrorsInSummaryProperty=DependencyProperty.RegisterAttached("ShowErrorsInSummary",function(){return Boolean},r,!0,r.OnShowErrorsInSummaryChanged),r.ErrorStyleProperty=DependencyProperty.Register("ErrorStyle",function(){return e.Style},r),r.FilterProperty=DependencyProperty.Register("Filter",function(){return new e.Enum(t.ValidationSummaryFilters)},r,t.ValidationSummaryFilters.All,function(e,t){return e.OnFilterChanged(t.OldValue,t.NewValue)}),r.FocusControlsOnClickProperty=DependencyProperty.Register("FocusControlsOnClick",function(){return Boolean},r,!0),r.HasErrorsProperty=DependencyProperty.RegisterReadOnly("HasErrors",function(){return Boolean},r,!1),r.HasDisplayedErrorsProperty=DependencyProperty.RegisterReadOnly("HasDisplayedErrors",function(){return Boolean},r,!1),r.HeaderProperty=DependencyProperty.Register("Header",function(){return Object},r,void 0,function(e,t){return e.OnHeaderChanged(t.OldValue,t.NewValue)}),r.HeaderTemplateProperty=DependencyProperty.Register("HeaderTemplate",function(){return e.DataTemplate},r),r.SummaryListBoxStyleProperty=DependencyProperty.Register("SummaryListBoxStyle",function(){return e.Style},r),r.TargetProperty=DependencyProperty.Register("Target",function(){return e.UIElement},r,void 0,function(e,t){return e.OnTargetChanged(t.OldValue,t.NewValue)}),r}(t.Control);t.ValidationSummary=r,t.TemplateVisualStates(r,{GroupName:"CommonStates",Name:"Normal"},{GroupName:"CommonStates",Name:"Disabled"},{GroupName:"ValidationStates",Name:"HasErrors"},{GroupName:"ValidationStates",Name:"Empty"}),t.TemplateParts(r,{Name:"SummaryListBox",Type:t.ListBox});var i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.ClearErrors=function(e){for(var t=[],n=this.getEnumerator();n.moveNext();)null!=n.current&&n.current.ItemType===e&&t.push(n.current);for(var o=0;o<t.length;o++)this.Remove(t[o])},t.prototype.ClearItems=function(){for(;this.Count>0;)this.RemoveAt(0)},t}(n)}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=e.Collections.ObservableCollection,o=function(e){function o(o,r,i,a,s){e.call(this),this.Message=o||null,this.MessageHeader=r||null,this.ItemType=i||t.ValidationSummaryItemType.ObjectError,this._Sources=new n,null!=a&&this._Sources.Add(a),this.Context=s}return __extends(o,e),Object.defineProperty(o.prototype,"Sources",{get:function(){return this._Sources},enumerable:!0,configurable:!0}),o}(e.MVVM.ObservableObject);t.ValidationSummaryItem=o,e.MVVM.NotifyProperties(o,["Message","MessageHeader","ItemType","Context"])}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t=function(){function e(e,t){Object.defineProperties(this,{PropertyName:{value:e,writable:!1},Control:{value:t||null,writable:!1}})}return e.prototype.Equals=function(t){if(!(t instanceof e))return!1;var n=t;return n.PropertyName===this.PropertyName&&n.Control===this.Control},e}();e.ValidationSummaryItemSource=t}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){function n(e,t){var n=o(e,t);if(null!=n)return n;var a=r(e.ItemType,t.ItemType);if(0!==a)return a;var s=e.Sources.Count>0?e.Sources.GetValueAt(0).Control:null,l=t.Sources.Count>0?t.Sources.GetValueAt(0).Control:null;return s!==l?(n=o(s,l),null!=n?n:(a=r(s.TabIndex,l.TabIndex),0!==a?a:i(s,l))):void 0}function o(e,t){return null==e?null==t?null:-1:null==t?1:null}function r(e,t){return e===t?0:t>e?-1:1}function i(t,n){if(!t||!n||t===n)return 0;var o=[],r=t;for(o.push(r);null!=(r=e.VisualTreeHelper.GetParent(r));)o.push(r);r=n;for(var i=r;null!=(r=e.VisualTreeHelper.GetParent(r));){var a=o.indexOf(r);if(0===a)return-1;if(!(0>a)){var s=o[a-1];if(!i||!s)return 0;for(var l=0,u=e.VisualTreeHelper.GetChildrenCount(r);u>l;l++){var c=e.VisualTreeHelper.GetChild(r,l);if(c===s)return 1;if(c===i)return-1}i=r}}return 0}t.compareSummaryItems=n}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=function(n){function o(){n.apply(this,arguments)}return __extends(o,n),o.prototype.CreateLayoutUpdater=function(){return new t.viewbox.ViewboxUpdater},o.ChildProperty=DependencyProperty.Register("Child",function(){return e.UIElement},o),o.StretchProperty=DependencyProperty.Register("Stretch",function(){return new e.Enum(e.Media.Stretch)},o,void 0,function(e,t){return e.InvalidateMeasure()}),o.StretchDirectionProperty=DependencyProperty.Register("StretchDirection",function(){return new e.Enum(t.StretchDirection)},o,void 0,function(e,t){return e.InvalidateMeasure()}),o}(e.FrameworkElement);t.Viewbox=n,e.Markup.Content(n,n.ChildProperty);var o;!function(t){e.UIReaction(n.StretchProperty,function(e,t,n){return e.invalidateMeasure()},!1),e.UIReaction(n.StretchDirectionProperty,function(e,t,n){return e.invalidateMeasure()},!1),e.UIReaction(n.ChildProperty,function(t,n,o,r){var i=r.XamlNode,a=new BError;n instanceof e.UIElement&&i.DetachVisualChild(n,a),o instanceof e.UIElement&&i.AttachVisualChild(o,a),a.Message&&a.ThrowException(),t.updateBounds(),t.invalidateMeasure()},!1,!1)}(o||(o={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(n){var o=function(o){function r(){o.apply(this,arguments)}return __extends(r,o),r.prototype.init=function(){this.setProcessDownPipe(minerva.singleton(n.processdown.ViewboxProcessDownPipeDef));var r=this.assets;r.stretch=e.Media.Stretch.Uniform,r.stretchDirection=t.StretchDirection.Both,r.viewXform=mat3.identity(),o.prototype.init.call(this)},r.prototype.measureOverride=function(e){var t=this.tree.subtree;if(!t)return new Size;t.measure(new Size(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY));var o=t.assets.desiredSize,r=n.helpers.computeScaleFactor(e,o,this.assets.stretch,this.assets.stretchDirection);return new Size(r.width*o.width,r.height*o.height)},r.prototype.arrangeOverride=function(e){var t=this.tree.subtree;if(!t)return new Size;var o=this.assets,r=t.assets.desiredSize,i=n.helpers.computeScaleFactor(e,r,o.stretch,o.stretchDirection);return t.arrange(new Rect(0,0,r.width,r.height)),this.setViewXform(i.width,i.height),new Size(i.width*r.width,i.height*r.height)},r.prototype.setViewXform=function(e,t){var n=this.assets,o=mat3.createScale(e,t);mat3.equal(n.viewXform,o)||(mat3.copyTo(o,n.viewXform),n.dirtyFlags|=minerva.DirtyFlags.Transform)},r}(minerva.anon.AnonymousUpdater);n.ViewboxUpdater=o}(n=t.viewbox||(t.viewbox={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(n){var o;!function(n){function o(n,o,i,a){var s=1,l=1,u=isFinite(n.width),c=isFinite(n.height);if((i===e.Media.Stretch.Uniform||i===e.Media.Stretch.UniformToFill||i===e.Media.Stretch.Fill)&&(u||c)){if(s=r(o.width)?0:n.width/o.width,l=r(o.height)?0:n.height/o.height,u)if(c)switch(i){case e.Media.Stretch.Uniform:var p=l>s?s:l;s=l=p;break;case e.Media.Stretch.UniformToFill:var h=s>l?s:l;s=l=h;break;case e.Media.Stretch.Fill:}else l=s;else s=l;switch(a){case t.StretchDirection.UpOnly:1>s&&(s=1),1>l&&(l=1);break;case t.StretchDirection.DownOnly:s>1&&(s=1),l>1&&(l=1);break;case t.StretchDirection.Both:}}return new Size(s,l)}function r(e){return Math.abs(e)<i}n.computeScaleFactor=o;var i=1.192093e-7}(o=n.helpers||(n.helpers={}))}(n=t.viewbox||(t.viewbox={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n=function(n){function o(){n.apply(this,arguments)}return __extends(o,n),o.prototype.CreateLayoutUpdater=function(){return new t.wrappanel.WrapPanelUpdater},o.OrientationProperty=DependencyProperty.Register("Orientation",function(){return new e.Enum(e.Orientation)},o,e.Orientation.Horizontal),o.ItemWidthProperty=DependencyProperty.Register("ItemWidth",function(){return Number},o,NaN),o.ItemHeightProperty=DependencyProperty.Register("ItemHeight",function(){return Number},o,NaN),o}(e.Controls.Panel);t.WrapPanel=n;var o;!function(t){e.UIReaction(n.OrientationProperty,function(e,t,n){return e.invalidateMeasure()},!1),e.UIReaction(n.ItemWidthProperty,function(e,t,n){return e.invalidateMeasure()},!1),e.UIReaction(n.ItemHeightProperty,function(e,t,n){return e.invalidateMeasure()},!1)}(o||(o={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(t){var n=function(n){function o(){n.apply(this,arguments)}return __extends(o,n),o.prototype.init=function(){this.setMeasurePipe(minerva.singleton(t.measure.WrapPanelMeasurePipeDef)).setArrangePipe(minerva.singleton(t.arrange.WrapPanelArrangePipeDef));var o=this.assets;o.orientation=e.Orientation.Horizontal,o.itemWidth=NaN,o.itemHeight=NaN,n.prototype.init.call(this)},o}(minerva.controls.panel.PanelUpdater);t.WrapPanelUpdater=n}(n=t.wrappanel||(t.wrappanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){function t(e,t,n){var o=e.getAttachedValue("$node"),r=o?o.XObject:null;r&&(isNaN(e.assets.width)&&!isNaN(t)&&(r.Width=t),isNaN(e.assets.height)&&!isNaN(n)&&(r.Height=n))}e.coerceChildSize=t}(t=e.helpers||(e.helpers={}))}(t=e.wrappanel||(e.wrappanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=function(t){function n(){t.call(this),this.addTapinAfter("doOverride","doVertical",e.tapins.doVertical).addTapinAfter("doVertical","doHorizontal",e.tapins.doHorizontal).removeTapin("doOverride")}return __extends(n,t),n}(minerva.controls.panel.arrange.PanelArrangePipeDef);e.TabPanelArrangePipeDef=t}(t=e.arrange||(e.arrange={}))}(t=e.tabpanel||(e.tabpanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=minerva.controls.panel,n=function(t){function n(){t.call(this),this.addTapinAfter("doOverride","doVertical",e.tapins.doVertical).addTapinAfter("doVertical","doHorizontal",e.tapins.doHorizontal).removeTapin("doOverride")}return __extends(n,t),n.prototype.createOutput=function(){var e=t.prototype.createOutput.call(this);return e.numRows=1,e.numHeaders=0,e.rowHeight=0,e},n.prototype.prepare=function(e,n,o){o.numRows=e.numRows,o.numHeaders=e.numHeaders,o.rowHeight=e.rowHeight,t.prototype.prepare.call(this,e,n,o)},n.prototype.flush=function(e,n,o){t.prototype.flush.call(this,e,n,o),e.numRows=o.numRows,e.numHeaders=o.numHeaders,e.rowHeight=o.rowHeight},n}(t.measure.PanelMeasurePipeDef);e.TabPanelMeasurePipeDef=n}(t=e.measure||(e.measure={}))}(t=e.tabpanel||(e.tabpanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=function(e){function t(){e.call(this),this.addTapinAfter("calcRenderXform","applyViewXform",n.applyViewXform)}return __extends(t,e),t}(minerva.core.processdown.ProcessDownPipeDef);e.ViewboxProcessDownPipeDef=t;var n;!function(e){function t(e,t,n,o,r){return 0===(e.dirtyFlags&minerva.DirtyFlags.Transform)?!0:(mat3.preapply(n.renderXform,e.viewXform),!0)}e.applyViewXform=t}(n||(n={}))}(t=e.processdown||(e.processdown={}))}(t=e.viewbox||(e.viewbox={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=minerva.controls.panel,n=function(t){function n(){t.call(this),this.addTapinAfter("doOverride","doHorizontal",e.tapins.doHorizontal).addTapinAfter("doOverride","doVertical",e.tapins.doVertical).removeTapin("doOverride")}return __extends(n,t),n}(t.arrange.PanelArrangePipeDef);e.WrapPanelArrangePipeDef=n}(t=e.arrange||(e.arrange={}))}(t=e.wrappanel||(e.wrappanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=minerva.controls.panel,n=function(t){function n(){t.call(this),this.addTapinAfter("doOverride","doHorizontal",e.tapins.doHorizontal).addTapinAfter("doOverride","doVertical",e.tapins.doVertical).removeTapin("doOverride")}return __extends(n,t),n}(t.measure.PanelMeasurePipeDef);e.WrapPanelMeasurePipeDef=n}(t=e.measure||(e.measure={}))}(t=e.wrappanel||(e.wrappanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(t){var n;!function(n){var o;!function(n){function o(n,o,i,a,s){if(n.tabAlignment!==e.Dock.Top&&n.tabAlignment!==e.Dock.Bottom)return!0;var l=o.finalSize,u=n.numRows>1,c=0,p=[],h=new r,d=t.helpers.getHeadersSize(a);u&&(p=t.helpers.calculateHeaderDistribution(a,l.width,d),c=t.helpers.getActiveRow(a,p,n.tabAlignment===e.Dock.Top),n.tabAlignment===e.Dock.Top&&(h.y=(n.numRows-1-c)*n.rowHeight),n.tabAlignment===e.Dock.Bottom&&0!==c&&(h.y=(n.numRows-c)*n.rowHeight));var m=o.childRect;m.x=m.y=m.width=m.height=0,m.height=n.rowHeight;for(var y=0,f=0,C=a.walk();C.step();){var S=C.current;if(S.assets.visibility!==minerva.Visibility.Collapsed){m.width=d[y],m.height=n.rowHeight;var I=u&&(f<p.length&&p[f]===y||y===n.numHeaders-1);I&&(m.width=l.width-h.x),S.arrange(m),m.x+=m.width,I&&(f===c&&n.tabAlignment===e.Dock.Top||f===c-1&&n.tabAlignment===e.Dock.Bottom?h.y=0:h.y+=n.rowHeight,h.x=0,f++),y++}}return!0}var r=minerva.Point;n.doHorizontal=o}(o=n.tapins||(n.tapins={}))}(n=t.arrange||(t.arrange={}))}(t=e.tabpanel||(e.tabpanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(t){var n;!function(n){var o;!function(n){function o(n,o,r,i,a){if(n.tabAlignment!==e.Dock.Left&&n.tabAlignment!==e.Dock.Right)return!0;var s=o.childRect;s.x=s.y=0,s.width=o.finalSize.width;for(var l=i.walk();l.step();){var u=l.current;if(u.assets.visibility!==minerva.Visibility.Collapsed){t.helpers.setTabItemZ(u);var c=t.helpers.getDesiredSizeWithoutMargin(u);s.height=c.height,u.arrange(s),s.y+=c.height}}return!0}n.doVertical=o}(o=n.tapins||(n.tapins={}))}(n=t.arrange||(t.arrange={}))}(t=e.tabpanel||(e.tabpanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(t){var n;!function(n){var o;!function(n){function o(n,o,r,i,a){if(n.tabAlignment!==e.Dock.Top&&n.tabAlignment!==e.Dock.Bottom)return!0;var s=r.desiredSize;s.width=s.height=0,r.numRows=1,r.numHeaders=0,r.rowHeight=0;for(var l=0,u=0,c=0,p=i.walk();p.step();){var h=p.current;if(h.assets.visibility===minerva.Visibility.Collapsed)break;r.numHeaders++,h.measure(o.availableSize);var d=t.helpers.getDesiredSizeWithoutMargin(h);r.rowHeight<d.height&&(r.rowHeight=d.height),u+d.width>a.width&&l>0?(u>c&&(c=u),u=d.width,l=1,r.numRows++):(u+=d.width,l++)}return u>c&&(c=u),s.height=r.rowHeight*r.numRows,s.width=!isFinite(s.width)||isNaN(s.width)||c<a.width?c:a.width,!0}n.doHorizontal=o}(o=n.tapins||(n.tapins={}))}(n=t.measure||(t.measure={}))}(t=e.tabpanel||(e.tabpanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(e){var t;!function(t){var n;!function(n){var o;!function(n){function o(n,o,r,i,a){if(n.tabAlignment!==e.Dock.Left&&n.tabAlignment!==e.Dock.Right)return!0;var s=r.desiredSize;s.width=s.height=0,r.numRows=1,r.numHeaders=0,r.rowHeight=0;for(var l=i.walk();l.step();){var u=l.current;if(u.assets.visibility===minerva.Visibility.Collapsed)break;r.numHeaders++,u.measure(o.availableSize);var c=t.helpers.getDesiredSizeWithoutMargin(u);s.width<c.width&&(s.width=c.width),s.height+=c.height}return!0}n.doVertical=o}(o=n.tapins||(n.tapins={}))}(n=t.measure||(t.measure={}))}(t=e.tabpanel||(e.tabpanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){var n;!function(t){function n(t,n,r,i,a){if(t.orientation!==e.Orientation.Horizontal)return!0;var s=n.finalSize,l=n.arrangedSize;o.copyTo(s,l);var u=n.childRect;u.x=u.y=u.width=u.height=0;for(var c=0,p=i.walk();p.step();){var h=p.current,d=h.assets.desiredSize;s.width<u.x+d.width&&(u.x=0,u.y+=c,c=0),c=Math.max(c,d.height),o.copyTo(d,u),h.arrange(u),u.x+=d.width}return l.width=Math.max(l.width,s.width),!0}var o=minerva.Size;t.doHorizontal=n}(n=t.tapins||(t.tapins={}))}(n=t.arrange||(t.arrange={}))}(n=t.wrappanel||(t.wrappanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){var n;!function(t){function n(t,n,r,i,a){if(t.orientation!==e.Orientation.Vertical)return!0;var s=n.finalSize,l=n.arrangedSize;o.copyTo(s,l);var u=n.childRect;u.x=u.y=u.width=u.height=0;for(var c=0,p=i.walk();p.step();){var h=p.current,d=h.assets.desiredSize;s.height<u.y+d.height&&(u.x+=c,u.y=0,c=0),c=Math.max(c,d.width),o.copyTo(d,u),h.arrange(u),u.y+=d.height}return l.height=Math.max(l.height,s.height),!0}var o=minerva.Size;t.doVertical=n}(n=t.tapins||(t.tapins={}))}(n=t.arrange||(t.arrange={}))}(n=t.wrappanel||(t.wrappanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(t){var n;!function(n){var o;!function(n){function o(n,o,r,i,a){if(n.orientation!==e.Orientation.Horizontal)return!0;var s=o.availableSize;isNaN(n.height)||(s.height=n.height),s.height=Math.min(s.height,n.maxHeight),s.height=Math.max(s.height,n.minHeight);var l=r.desiredSize;l.width=l.height=0;for(var u=0,c=0,p=0,h=i.walk();h.step();){var d=h.current;t.helpers.coerceChildSize(d,n.itemWidth,n.itemHeight),d.measure(s);var m=d.assets.desiredSize;s.width<c+m.width&&(c=0,p+=u,u=0),u=Math.max(u,m.height),l.height=Math.max(l.height,p+m.height),l.width=Math.max(l.width,c+m.width),c+=m.width}return!0}n.doHorizontal=o}(o=n.tapins||(n.tapins={}))}(n=t.measure||(t.measure={}))}(n=t.wrappanel||(t.wrappanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));var Fayde;!function(e){var t;!function(t){var n;!function(t){var n;!function(n){var o;!function(n){function o(n,o,r,i,a){if(n.orientation!==e.Orientation.Vertical)return!0;var s=o.availableSize;isNaN(n.width)||(s.width=n.width),s.width=Math.min(s.width,n.maxWidth),s.width=Math.max(s.width,n.minWidth);var l=r.desiredSize;l.width=l.height=0;for(var u=0,c=0,p=0,h=i.walk();h.step();){var d=h.current;t.helpers.coerceChildSize(d,n.itemWidth,n.itemHeight),d.measure(s);var m=d.assets.desiredSize;s.height<p+m.height&&(c+=u,p=0,u=0),u=Math.max(u,m.width),l.height=Math.max(l.height,p+m.height),l.width=Math.max(l.width,c+m.width),p+=m.height}return!0}n.doVertical=o}(o=n.tapins||(n.tapins={}))}(n=t.measure||(t.measure={}))}(n=t.wrappanel||(t.wrappanel={}))}(t=e.Controls||(e.Controls={}))}(Fayde||(Fayde={}));
//# sourceMappingURL=fayde.controls.min.js.map
